/*! For license information please see component---src-pages-build-tsx-06ea9ad6a71393ad00d4.js.LICENSE.txt */
"use strict";(self.webpackChunkautogentstudio=self.webpackChunkautogentstudio||[]).push([[477],{3944:function(e,t,n){n.r(t),n.d(t,{default:function(){return Hr}});var a=n(6540),r=n(50),o=n(436),i=n(3532),l=n(8458),s=n(7677),c=n(2744),d=n(282),u=n(6795),m=n(1917),p=n(9910),g=n(697),h=n(9644),f=n(4060),v=n(7213),y=n(2708),b=n(2640),x=n(6148),E=n(5404),w=n(6880);const C={config:{version:"1.0.0",component_type:"team",name:"default_team",participants:[{component_type:"agent",name:"assistant_agent",agent_type:"AssistantAgent",system_message:"You are a helpful assistant. Solve tasks carefully. When done respond with TERMINATE",model_client:{component_type:"model",model:"gpt-4o-2024-08-06",model_type:"OpenAIChatCompletionClient"}}],team_type:"RoundRobinGroupChat",termination_condition:{component_type:"termination",termination_type:"MaxMessageTermination",max_messages:3}}};var N=n(834);const A=e=>{let{isOpen:t,teams:n,currentTeam:r,onToggle:o,onSelectTeam:i,onCreateTeam:l,onEditTeam:s,onDeleteTeam:c,isLoading:d=!1}=e;const A=(0,N.t)((e=>e.getDefaultGallery())),k=()=>{const e=Object.assign({},C);e.config.name="new_team_"+(new Date).getTime(),l(e)};return t?a.createElement("div",{className:"h-full border-r border-secondary"},a.createElement("div",{className:"flex items-center justify-between pt-0 p-4 pl-2 pr-2 border-b border-secondary"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:"text-primary font-medium"},"Teams"),a.createElement("span",{className:"px-2 py-0.5 text-xs bg-accent/10 text-accent rounded"},n.length)),a.createElement(u.A,{title:"Close Sidebar"},a.createElement("button",{onClick:o,className:"p-2 rounded-md hover:bg-secondary hover:text-accent text-secondary transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-opacity-50"},a.createElement(h.A,{strokeWidth:1.5,className:"h-6 w-6"})))),a.createElement("div",{className:"my-4 flex text-sm  "},a.createElement("div",{className:" mr-2 w-full"},a.createElement(u.A,{title:"Create new session"},a.createElement(m.Ay,{type:"primary",className:"w-full",icon:a.createElement(g.A,{className:"w-4 h-4"}),onClick:k},"New Team")))),a.createElement("div",{className:"py-2 flex   text-sm text-secondary"},a.createElement("div",{className:"flex"}," Recents"),d&&a.createElement(f.A,{className:"w-4 h-4 ml-2 animate-spin"})),!d&&0===n.length&&a.createElement("div",{className:"p-2 mr-2 text-center text-secondary text-sm border border-dashed rounded "},a.createElement(v.A,{className:"w-4 h-4 inline-block mr-1.5 -mt-0.5"}),"No recent teams found"),a.createElement("div",{className:"scroll overflow-y-auto h-[calc(100%-170px)]"},a.createElement(a.Fragment,null,n.length>0&&a.createElement("div",{key:"teams_title",className:" "+(d?"  pointer-events-none":"")}," ",n.map((e=>a.createElement("div",{key:e.id,className:"relative   border-secondary"},a.createElement("div",{className:" absolute top-1 left-0.5 z-50 h-[calc(100%-8px)]\n               w-1 bg-opacity-80  rounded "+((null==r?void 0:r.id)===e.id?"bg-accent":"bg-tertiary")}," "),a.createElement("div",{className:"group ml-1 flex flex-col p-3 rounded-l cursor-pointer hover:bg-secondary   "+((null==r?void 0:r.id)===e.id?"border-accent bg-secondary":"border-transparent"),onClick:()=>i(e)},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"font-medium truncate"},e.config.name),a.createElement("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},a.createElement(u.A,{title:"Delete team"},a.createElement(m.Ay,{type:"text",size:"small",className:"p-0 min-w-[24px] h-6",danger:!0,icon:a.createElement(y.A,{className:"w-4 h-4 text-red-500"}),onClick:t=>{t.stopPropagation(),e.id&&c(e.id)}})))),a.createElement("div",{className:"mt-1 flex items-center gap-2 text-xs text-secondary"},a.createElement("span",{className:"bg-secondary/20  truncate   rounded"},e.config.team_type),a.createElement("div",{className:"flex items-center gap-1"},a.createElement(b.A,{className:"w-3 h-3"}),a.createElement("span",null,e.config.participants.length," ",1===e.config.participants.length?"agent":"agents"))),e.updated_at&&a.createElement("div",{className:"mt-1 flex items-center gap-1 text-xs text-secondary"},a.createElement("span",null,(0,w.vq)(e.updated_at)))))))),a.createElement("div",{key:"gallery_title",className:"py-2 text-sm text-secondary mt-4"},a.createElement(x.A,{className:"w-4 h-4 inline-block mr-1.5"}),"From Gallery"),a.createElement("div",{key:"gallery_content",className:"scroll overflow-y-auto"},null==A?void 0:A.items.teams.map((e=>a.createElement("div",{key:e.name+e.team_type,className:"relative border-secondary"},a.createElement("div",{className:"absolute top-1 left-0.5 z-50 h-[calc(100%-8px)]\n              w-1 bg-opacity-80 rounded bg-tertiary"}),a.createElement("div",{className:"group ml-1 flex flex-col p-3 rounded-l cursor-pointer hover:bg-secondary"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"font-medium truncate"},e.name),a.createElement("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},a.createElement(u.A,{title:"Use as template"},a.createElement(m.Ay,{type:"text",size:"small",className:"p-0 min-w-[24px] h-6",icon:a.createElement(E.A,{className:"w-4 h-4"}),onClick:t=>{t.stopPropagation(),e.name=e.name+"_"+(new Date).getTime(),l({config:e})}})))),a.createElement("div",{className:"mt-1 flex items-center gap-2 text-xs text-secondary"},a.createElement("span",{className:"bg-secondary/20 truncate rounded"},e.team_type),a.createElement("div",{className:"flex items-center gap-1"},a.createElement(b.A,{className:"w-3 h-3"}),a.createElement("span",null,e.participants.length," ",1===e.participants.length?"agent":"agents"))))))))))):a.createElement("div",{className:"h-full border-r border-secondary"},a.createElement("div",{className:"p-2 -ml-2"},a.createElement(u.A,{title:"Teams ("+n.length+")"},a.createElement("button",{onClick:o,className:"p-2 rounded-md hover:bg-secondary hover:text-accent text-secondary transition-colors focus:outline-none focus:ring-2 focus:ring-accent focus:ring-opacity-50"},a.createElement(p.A,{strokeWidth:1.5,className:"h-6 w-6"})))),a.createElement("div",{className:"mt-4 px-2 -ml-1"},a.createElement(u.A,{title:"Create new team"},a.createElement(m.Ay,{type:"text",className:"w-full p-2 flex justify-center",onClick:k,icon:a.createElement(g.A,{className:"w-4 h-4"})}))))};var k=n(961);const S="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function O(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function M(e){return"nodeType"in e}function $(e){var t,n;return e?O(e)?e:M(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function I(e){const{Document:t}=$(e);return e instanceof t}function D(e){return!O(e)&&e instanceof $(e).HTMLElement}function R(e){return e instanceof $(e).SVGElement}function T(e){return e?O(e)?e.document:M(e)?I(e)?e:D(e)||R(e)?e.ownerDocument:document:document:document}const _=S?a.useLayoutEffect:a.useEffect;function j(e){const t=(0,a.useRef)(e);return _((()=>{t.current=e})),(0,a.useCallback)((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return null==t.current?void 0:t.current(...n)}),[])}function z(e,t){void 0===t&&(t=[e]);const n=(0,a.useRef)(e);return _((()=>{n.current!==e&&(n.current=e)}),t),n}function L(e,t){const n=(0,a.useRef)();return(0,a.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function P(e){const t=j(e),n=(0,a.useRef)(null),r=(0,a.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function H(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e}),[e]),t.current}let B={};function F(e,t){return(0,a.useMemo)((()=>{if(t)return t;const n=null==B[e]?0:B[e]+1;return B[e]=n,e+"-"+n}),[e,t])}function U(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.reduce(((t,n)=>{const a=Object.entries(n);for(const[r,o]of a){const n=t[r];null!=n&&(t[r]=n+e*o)}return t}),{...t})}}const X=U(1),K=U(-1);function W(e){if(!e)return!1;const{KeyboardEvent:t}=$(e.target);return t&&e instanceof t}function G(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=$(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const q=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[q.Translate.toString(e),q.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:a}=e;return t+" "+n+"ms "+a}}}),V="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Y(e){return e.matches(V)?e:e.querySelector(V)}const J={display:"none"};function Q(e){let{id:t,value:n}=e;return a.createElement("div",{id:t,style:J},n)}function Z(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return a.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const ee=(0,a.createContext)(null);const te={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ne={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ae(e){let{announcements:t=ne,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=te}=e;const{announce:i,announcement:l}=function(){const[e,t]=(0,a.useState)("");return{announce:(0,a.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),s=F("DndLiveRegion"),[c,d]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{d(!0)}),[]),function(e){const t=(0,a.useContext)(ee);(0,a.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,a.useMemo)((()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:a}=e;t.onDragMove&&i(t.onDragMove({active:n,over:a}))},onDragOver(e){let{active:n,over:a}=e;i(t.onDragOver({active:n,over:a}))},onDragEnd(e){let{active:n,over:a}=e;i(t.onDragEnd({active:n,over:a}))},onDragCancel(e){let{active:n,over:a}=e;i(t.onDragCancel({active:n,over:a}))}})),[i,t])),!c)return null;const u=a.createElement(a.Fragment,null,a.createElement(Q,{id:r,value:o.draggable}),a.createElement(Z,{id:s,announcement:l}));return n?(0,k.createPortal)(u,n):u}var re;function oe(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(re||(re={}));const ie=Object.freeze({x:0,y:0});function le(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function se(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=r-a,l=o-n;if(a<r&&n<o){const n=t.width*t.height,a=e.width*e.height,r=i*l;return Number((r/(n+a-r)).toFixed(4))}return 0}const ce=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const r=[];for(const o of a){const{id:e}=o,a=n.get(e);if(a){const n=se(a,t);n>0&&r.push({id:e,data:{droppableContainer:o,value:n}})}}return r.sort(le)};function de(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ie}function ue(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const me=ue(1);function pe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const ge={ignoreTransform:!1};function he(e,t){void 0===t&&(t=ge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:a}=$(e).getComputedStyle(e);t&&(n=function(e,t,n){const a=pe(t);if(!a)return e;const{scaleX:r,scaleY:o,x:i,y:l}=a,s=e.left-i-(1-r)*parseFloat(n),c=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),d=r?e.width/r:e.width,u=o?e.height/o:e.height;return{width:d,height:u,top:c,right:s+d,bottom:c+u,left:s}}(n,t,a))}const{top:a,left:r,width:o,height:i,bottom:l,right:s}=n;return{top:a,left:r,width:o,height:i,bottom:l,right:s}}function fe(e){return he(e,{ignoreTransform:!0})}function ve(e,t){const n=[];return e?function a(r){if(null!=t&&n.length>=t)return n;if(!r)return n;if(I(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!D(r)||R(r))return n;if(n.includes(r))return n;const o=$(e).getComputedStyle(r);return r!==e&&function(e,t){void 0===t&&(t=$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const a=t[e];return"string"==typeof a&&n.test(a)}))}(r,o)&&n.push(r),function(e,t){return void 0===t&&(t=$(e).getComputedStyle(e)),"fixed"===t.position}(r,o)?n:a(r.parentNode)}(e):n}function ye(e){const[t]=ve(e,1);return null!=t?t:null}function be(e){return S&&e?O(e)?e:M(e)?I(e)||e===T(e).scrollingElement?window:D(e)?e:null:null:null}function xe(e){return O(e)?e.scrollX:e.scrollLeft}function Ee(e){return O(e)?e.scrollY:e.scrollTop}function we(e){return{x:xe(e),y:Ee(e)}}var Ce;function Ne(e){return!(!S||!e)&&e===document.scrollingElement}function Ae(e){const t={x:0,y:0},n=Ne(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Ce||(Ce={}));const ke={x:.2,y:.2};function Se(e,t,n,a,r){let{top:o,left:i,right:l,bottom:s}=n;void 0===a&&(a=10),void 0===r&&(r=ke);const{isTop:c,isBottom:d,isLeft:u,isRight:m}=Ae(e),p={x:0,y:0},g={x:0,y:0},h=t.height*r.y,f=t.width*r.x;return!c&&o<=t.top+h?(p.y=Ce.Backward,g.y=a*Math.abs((t.top+h-o)/h)):!d&&s>=t.bottom-h&&(p.y=Ce.Forward,g.y=a*Math.abs((t.bottom-h-s)/h)),!m&&l>=t.right-f?(p.x=Ce.Forward,g.x=a*Math.abs((t.right-f-l)/f)):!u&&i<=t.left+f&&(p.x=Ce.Backward,g.x=a*Math.abs((t.left+f-i)/f)),{direction:p,speed:g}}function Oe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:a,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Me(e){return e.reduce(((e,t)=>X(e,we(t))),ie)}function $e(e,t){if(void 0===t&&(t=he),!e)return;const{top:n,left:a,bottom:r,right:o}=t(e);ye(e)&&(r<=0||o<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ie=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+xe(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Ee(t)),0)}]];class De{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=ve(t),a=Me(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,o,i]of Ie)for(const e of o)Object.defineProperty(this,e,{get:()=>{const t=i(n),o=a[r]-t;return this.rect[e]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Re{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var a;null==(a=this.target)||a.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Te(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t&&a>t.y}var _e,je;function ze(e){e.preventDefault()}function Le(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(_e||(_e={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(je||(je={}));const Pe={start:[je.Space,je.Enter],cancel:[je.Esc],end:[je.Space,je.Enter,je.Tab]},He=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case je.Right:return{...n,x:n.x+25};case je.Left:return{...n,x:n.x-25};case je.Down:return{...n,y:n.y+25};case je.Up:return{...n,y:n.y-25}}};class Be{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Re(T(t)),this.windowListeners=new Re($(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_e.Resize,this.handleCancel),this.windowListeners.add(_e.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(_e.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&$e(n),t(ie)}handleKeyDown(e){if(W(e)){const{active:t,context:n,options:a}=this.props,{keyboardCodes:r=Pe,coordinateGetter:o=He,scrollBehavior:i="smooth"}=a,{code:l}=e;if(r.end.includes(l))return void this.handleEnd(e);if(r.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:ie;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=K(d,c),a={x:0,y:0},{scrollableAncestors:r}=n.current;for(const n of r){const r=e.code,{isTop:o,isRight:l,isLeft:s,isBottom:c,maxScroll:u,minScroll:m}=Ae(n),p=Oe(n),g={x:Math.min(r===je.Right?p.right-p.width/2:p.right,Math.max(r===je.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(r===je.Down?p.bottom-p.height/2:p.bottom,Math.max(r===je.Down?p.top:p.top+p.height/2,d.y))},h=r===je.Right&&!l||r===je.Left&&!s,f=r===je.Down&&!c||r===je.Up&&!o;if(h&&g.x!==d.x){const e=n.scrollLeft+t.x,o=r===je.Right&&e<=u.x||r===je.Left&&e>=m.x;if(o&&!t.y)return void n.scrollTo({left:e,behavior:i});a.x=o?n.scrollLeft-e:r===je.Right?n.scrollLeft-u.x:n.scrollLeft-m.x,a.x&&n.scrollBy({left:-a.x,behavior:i});break}if(f&&g.y!==d.y){const e=n.scrollTop+t.y,o=r===je.Down&&e<=u.y||r===je.Up&&e>=m.y;if(o&&!t.x)return void n.scrollTo({top:e,behavior:i});a.y=o?n.scrollTop-e:r===je.Down?n.scrollTop-u.y:n.scrollTop-m.y,a.y&&n.scrollBy({top:-a.y,behavior:i});break}}this.handleMove(e,X(K(d,this.referenceCoordinates),a))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Fe(e){return Boolean(e&&"distance"in e)}function Ue(e){return Boolean(e&&"delay"in e)}Be.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=Pe,onActivation:r}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(a.start.includes(i)){const t=o.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class Xe{constructor(e,t,n){var a;void 0===n&&(n=function(e){const{EventTarget:t}=$(e);return e instanceof t?e:T(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:o}=r;this.props=e,this.events=t,this.document=T(o),this.documentListeners=new Re(this.document),this.listeners=new Re(n),this.windowListeners=new Re($(o)),this.initialCoordinates=null!=(a=G(r))?a:ie,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(_e.Resize,this.handleCancel),this.windowListeners.add(_e.DragStart,ze),this.windowListeners.add(_e.VisibilityChange,this.handleCancel),this.windowListeners.add(_e.ContextMenu,ze),this.documentListeners.add(_e.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ue(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Fe(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(_e.Click,Le,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_e.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:a,props:r}=this,{onMove:o,options:{activationConstraint:i}}=r;if(!a)return;const l=null!=(t=G(e))?t:ie,s=K(a,l);if(!n&&i){if(Fe(i)){if(null!=i.tolerance&&Te(s,i.tolerance))return this.handleCancel();if(Te(s,i.distance))return this.handleStart()}return Ue(i)&&Te(s,i.tolerance)?this.handleCancel():void this.handlePending(i,s)}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===je.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Ke={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class We extends Xe{constructor(e){const{event:t}=e,n=T(t.target);super(e,Ke,n)}}We.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!(!n.isPrimary||0!==n.button)&&(null==a||a({event:n}),!0)}}];const Ge={move:{name:"mousemove"},end:{name:"mouseup"}};var qe;!function(e){e[e.RightClick=2]="RightClick"}(qe||(qe={}));(class extends Xe{constructor(e){super(e,Ge,T(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button!==qe.RightClick&&(null==a||a({event:n}),!0)}}];const Ve={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Ye,Je;function Qe(e){let{acceleration:t,activator:n=Ye.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:l=5,order:s=Je.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:p}=e;const g=function(e){let{delta:t,disabled:n}=e;const a=H(t);return L((e=>{if(n||!a||!e)return Ze;const r={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Ce.Backward]:e.x[Ce.Backward]||-1===r.x,[Ce.Forward]:e.x[Ce.Forward]||1===r.x},y:{[Ce.Backward]:e.y[Ce.Backward]||-1===r.y,[Ce.Forward]:e.y[Ce.Forward]||1===r.y}}}),[n,t,a])}({delta:m,disabled:!i}),[h,f]=function(){const e=(0,a.useRef)(null);return[(0,a.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,a.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,a.useRef)({x:0,y:0}),y=(0,a.useRef)({x:0,y:0}),b=(0,a.useMemo)((()=>{switch(n){case Ye.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ye.DraggableRect:return o}}),[n,o,c]),x=(0,a.useRef)(null),E=(0,a.useCallback)((()=>{const e=x.current;if(!e)return;const t=v.current.x*y.current.x,n=v.current.y*y.current.y;e.scrollBy(t,n)}),[]),w=(0,a.useMemo)((()=>s===Je.TreeOrder?[...d].reverse():d),[s,d]);(0,a.useEffect)((()=>{if(i&&d.length&&b){for(const e of w){if(!1===(null==r?void 0:r(e)))continue;const n=d.indexOf(e),a=u[n];if(!a)continue;const{direction:o,speed:i}=Se(e,a,b,t,p);for(const e of["x","y"])g[e][o[e]]||(i[e]=0,o[e]=0);if(i.x>0||i.y>0)return f(),x.current=e,h(E,l),v.current=i,void(y.current=o)}v.current={x:0,y:0},y.current={x:0,y:0},f()}else f()}),[t,E,r,f,i,l,JSON.stringify(b),JSON.stringify(g),h,d,w,u,JSON.stringify(p)])}(class extends Xe{constructor(e){super(e,Ve)}static setup(){return window.addEventListener(Ve.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ve.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:r}=n;return!(r.length>1)&&(null==a||a({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Ye||(Ye={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Je||(Je={}));const Ze={x:{[Ce.Backward]:!1,[Ce.Forward]:!1},y:{[Ce.Backward]:!1,[Ce.Forward]:!1}};var et,tt;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(et||(et={})),function(e){e.Optimized="optimized"}(tt||(tt={}));const nt=new Map;function at(e,t){return L((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function rt(e){let{callback:t,disabled:n}=e;const r=j(t),o=(0,a.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return(0,a.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}function ot(e){return new De(he(e),e)}function it(e,t,n){void 0===t&&(t=ot);const[r,o]=(0,a.useState)(null);function i(){o((a=>{if(!e)return null;var r;if(!1===e.isConnected)return null!=(r=null!=a?a:n)?r:null;const o=t(e);return JSON.stringify(a)===JSON.stringify(o)?a:o}))}const l=function(e){let{callback:t,disabled:n}=e;const r=j(t),o=(0,a.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return(0,a.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}({callback(t){if(e)for(const n of t){const{type:t,target:a}=n;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){i();break}}}}),s=rt({callback:i});return _((()=>{i(),e?(null==s||s.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==l||l.disconnect())}),[e]),r}const lt=[];function st(e,t){void 0===t&&(t=[]);const n=(0,a.useRef)(null);return(0,a.useEffect)((()=>{n.current=null}),t),(0,a.useEffect)((()=>{const t=e!==ie;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?K(e,n.current):ie}function ct(e){return(0,a.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const dt=[];function ut(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return D(t)?t:e}const mt=[{sensor:We,options:{}},{sensor:Be,options:{}}],pt={current:{}},gt={draggable:{measure:fe},droppable:{measure:fe,strategy:et.WhileDragging,frequency:tt.Optimized},dragOverlay:{measure:he}};class ht extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const ft={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ht,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:oe},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gt,measureDroppableContainers:oe,windowRect:null,measuringScheduled:!1},vt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:oe,draggableNodes:new Map,over:null,measureDroppableContainers:oe},yt=(0,a.createContext)(vt),bt=(0,a.createContext)(ft);function xt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ht}}}function Et(e,t){switch(t.type){case re.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case re.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=t,{id:a}=n,r=new ht(e.droppable.containers);return r.set(a,n),{...e,droppable:{...e.droppable,containers:r}}}case re.SetDroppableDisabled:{const{id:n,key:a,disabled:r}=t,o=e.droppable.containers.get(n);if(!o||a!==o.key)return e;const i=new ht(e.droppable.containers);return i.set(n,{...o,disabled:r}),{...e,droppable:{...e.droppable,containers:i}}}case re.UnregisterDroppable:{const{id:n,key:a}=t,r=e.droppable.containers.get(n);if(!r||a!==r.key)return e;const o=new ht(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function wt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=(0,a.useContext)(yt),i=H(r),l=H(null==n?void 0:n.id);return(0,a.useEffect)((()=>{if(!t&&!r&&i&&null!=l){if(!W(i))return;if(document.activeElement===i.target)return;const e=o.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Y(e);if(t){t.focus();break}}}))}}),[r,t,o,l,i]),null}function Ct(e,t){let{transform:n,...a}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...a})),n):n}const Nt=(0,a.createContext)({...ie,scaleX:1,scaleY:1});var At;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(At||(At={}));const kt=(0,a.memo)((function(e){var t,n,r,o;let{id:i,accessibility:l,autoScroll:s=!0,children:c,sensors:d=mt,collisionDetection:u=ce,measuring:m,modifiers:p,...g}=e;const h=(0,a.useReducer)(Et,void 0,xt),[f,v]=h,[y,b]=function(){const[e]=(0,a.useState)((()=>new Set)),t=(0,a.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,a.useCallback)((t=>{let{type:n,event:a}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,a)}))}),[e]),t]}(),[x,E]=(0,a.useState)(At.Uninitialized),w=x===At.Initialized,{draggable:{active:C,nodes:N,translate:A},droppable:{containers:O}}=f,M=null!=C?N.get(C):null,I=(0,a.useRef)({initial:null,translated:null}),R=(0,a.useMemo)((()=>{var e;return null!=C?{id:C,data:null!=(e=null==M?void 0:M.data)?e:pt,rect:I}:null}),[C,M]),T=(0,a.useRef)(null),[j,H]=(0,a.useState)(null),[B,U]=(0,a.useState)(null),K=z(g,Object.values(g)),W=F("DndDescribedBy",i),q=(0,a.useMemo)((()=>O.getEnabled()),[O]),V=(Y=m,(0,a.useMemo)((()=>({draggable:{...gt.draggable,...null==Y?void 0:Y.draggable},droppable:{...gt.droppable,...null==Y?void 0:Y.droppable},dragOverlay:{...gt.dragOverlay,...null==Y?void 0:Y.dragOverlay}})),[null==Y?void 0:Y.draggable,null==Y?void 0:Y.droppable,null==Y?void 0:Y.dragOverlay]));var Y;const{droppableRects:J,measureDroppableContainers:Q,measuringScheduled:Z}=function(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,l]=(0,a.useState)(null),{frequency:s,measure:c,strategy:d}=o,u=(0,a.useRef)(e),m=function(){switch(d){case et.Always:return!1;case et.BeforeDragging:return n;default:return!n}}(),p=z(m),g=(0,a.useCallback)((function(e){void 0===e&&(e=[]),p.current||l((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),h=(0,a.useRef)(null),f=L((t=>{if(m&&!n)return nt;if(!t||t===nt||u.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,a=e?new De(c(e),e):null;n.rect.current=a,a&&t.set(n.id,a)}return t}return t}),[e,i,n,m,c]);return(0,a.useEffect)((()=>{u.current=e}),[e]),(0,a.useEffect)((()=>{m||g()}),[n,m]),(0,a.useEffect)((()=>{i&&i.length>0&&l(null)}),[JSON.stringify(i)]),(0,a.useEffect)((()=>{m||"number"!=typeof s||null!==h.current||(h.current=setTimeout((()=>{g(),h.current=null}),s))}),[s,m,g,...r]),{droppableRects:f,measureDroppableContainers:g,measuringScheduled:null!=i}}(q,{dragging:w,dependencies:[A.x,A.y],config:V.droppable}),te=function(e,t){const n=null!=t?e.get(t):void 0,a=n?n.node.current:null;return L((e=>{var n;return null==t?null:null!=(n=null!=a?a:e)?n:null}),[a,t])}(N,C),ne=(0,a.useMemo)((()=>B?G(B):null),[B]),oe=function(){const e=!1===(null==j?void 0:j.autoScrollEnabled),t="object"==typeof s?!1===s.enabled:!1===s,n=w&&!e&&!t;if("object"==typeof s)return{...s,enabled:n};return{enabled:n}}(),le=function(e,t){return at(e,t)}(te,V.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=(0,a.useRef)(!1),{x:l,y:s}="boolean"==typeof o?{x:o,y:o}:o;_((()=>{if(!l&&!s||!t)return void(i.current=!1);if(i.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=de(n(e),r);if(l||(a.x=0),s||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=ye(e);t&&t.scrollBy({top:a.y,left:a.x})}}),[t,l,s,r,n])}({activeNode:null!=C?N.get(C):null,config:oe.layoutShiftCompensation,initialRect:le,measure:V.draggable.measure});const se=it(te,V.draggable.measure,le),ue=it(te?te.parentElement:null),pe=(0,a.useRef)({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=O.getNodeFor(null==(t=pe.current.over)?void 0:t.id),fe=function(e){let{measure:t}=e;const[n,r]=(0,a.useState)(null),o=rt({callback:(0,a.useCallback)((e=>{for(const{target:n}of e)if(D(n)){r((e=>{const a=t(n);return e?{...e,width:a.width,height:a.height}:a}));break}}),[t])}),i=(0,a.useCallback)((e=>{const n=ut(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),r(n?t(n):null)}),[t,o]),[l,s]=P(i);return(0,a.useMemo)((()=>({nodeRef:l,rect:n,setRef:s})),[n,l,s])}({measure:V.dragOverlay.measure}),xe=null!=(n=fe.nodeRef.current)?n:te,Ee=w?null!=(r=fe.rect)?r:se:null,Ce=Boolean(fe.nodeRef.current&&fe.rect),Ae=de(ke=Ce?null:se,at(ke));var ke;const Se=ct(xe?$(xe):null),Oe=function(e){const t=(0,a.useRef)(e),n=L((n=>e?n&&n!==lt&&e&&t.current&&e.parentNode===t.current.parentNode?n:ve(e):lt),[e]);return(0,a.useEffect)((()=>{t.current=e}),[e]),n}(w?null!=ge?ge:te:null),$e=function(e,t){void 0===t&&(t=he);const[n]=e,r=ct(n?$(n):null),[o,i]=(0,a.useState)(dt);function l(){i((()=>e.length?e.map((e=>Ne(e)?r:new De(t(e),e))):dt))}const s=rt({callback:l});return _((()=>{null==s||s.disconnect(),l(),e.forEach((e=>null==s?void 0:s.observe(e)))}),[e]),o}(Oe),Ie=Ct(p,{transform:{x:A.x-Ae.x,y:A.y-Ae.y,scaleX:1,scaleY:1},activatorEvent:B,active:R,activeNodeRect:se,containerNodeRect:ue,draggingNodeRect:Ee,over:pe.current.over,overlayNodeRect:fe.rect,scrollableAncestors:Oe,scrollableAncestorRects:$e,windowRect:Se}),Re=ne?X(ne,A):null,Te=function(e){const[t,n]=(0,a.useState)(null),r=(0,a.useRef)(e),o=(0,a.useCallback)((e=>{const t=be(e.target);t&&n((e=>e?(e.set(t,we(t)),new Map(e)):null))}),[]);return(0,a.useEffect)((()=>{const t=r.current;if(e!==t){a(t);const i=e.map((e=>{const t=be(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,we(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach((e=>{const t=be(e);null==t||t.removeEventListener("scroll",o)}))}}),[o,e]),(0,a.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>X(e,t)),ie):Me(e):ie),[e,t])}(Oe),_e=st(Te),je=st(Te,[se]),ze=X(Ie,_e),Le=Ee?me(Ee,Ie):null,Pe=R&&Le?u({active:R,collisionRect:Le,droppableRects:J,droppableContainers:q,pointerCoordinates:Re}):null,He=function(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}(Pe,"id"),[Be,Fe]=(0,a.useState)(null),Ue=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Ce?Ie:X(Ie,je),null!=(o=null==Be?void 0:Be.rect)?o:null,se),Xe=(0,a.useRef)(null),Ke=(0,a.useCallback)(((e,t)=>{let{sensor:n,options:a}=t;if(null==T.current)return;const r=N.get(T.current);if(!r)return;const o=e.nativeEvent,i=new n({active:T.current,activeNode:r,event:o,options:a,context:pe,onAbort(e){if(!N.get(e))return;const{onDragAbort:t}=K.current,n={id:e};null==t||t(n),y({type:"onDragAbort",event:n})},onPending(e,t,n,a){if(!N.get(e))return;const{onDragPending:r}=K.current,o={id:e,constraint:t,initialCoordinates:n,offset:a};null==r||r(o),y({type:"onDragPending",event:o})},onStart(e){const t=T.current;if(null==t)return;const n=N.get(t);if(!n)return;const{onDragStart:a}=K.current,r={activatorEvent:o,active:{id:t,data:n.data,rect:I}};(0,k.unstable_batchedUpdates)((()=>{null==a||a(r),E(At.Initializing),v({type:re.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:r}),H(Xe.current),U(o)}))},onMove(e){v({type:re.DragMove,coordinates:e})},onEnd:l(re.DragEnd),onCancel:l(re.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:a,scrollAdjustedTranslate:r}=pe.current;let i=null;if(t&&r){const{cancelDrop:l}=K.current;if(i={activatorEvent:o,active:t,collisions:n,delta:r,over:a},e===re.DragEnd&&"function"==typeof l){await Promise.resolve(l(i))&&(e=re.DragCancel)}}T.current=null,(0,k.unstable_batchedUpdates)((()=>{v({type:e}),E(At.Uninitialized),Fe(null),H(null),U(null),Xe.current=null;const t=e===re.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=K.current[t];null==e||e(i),y({type:t,event:i})}}))}}Xe.current=i}),[N]),We=(0,a.useCallback)(((e,t)=>(n,a)=>{const r=n.nativeEvent,o=N.get(a);if(null!==T.current||!o||r.dndKit||r.defaultPrevented)return;const i={active:o};!0===e(n,t.options,i)&&(r.dndKit={capturedBy:t.sensor},T.current=a,Ke(n,t))}),[N,Ke]),Ge=function(e,t){return(0,a.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:a}=n;return[...e,...a.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,We);!function(e){(0,a.useEffect)((()=>{if(!S)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),_((()=>{se&&x===At.Initializing&&E(At.Initialized)}),[se,x]),(0,a.useEffect)((()=>{const{onDragMove:e}=K.current,{active:t,activatorEvent:n,collisions:a,over:r}=pe.current;if(!t||!n)return;const o={active:t,activatorEvent:n,collisions:a,delta:{x:ze.x,y:ze.y},over:r};(0,k.unstable_batchedUpdates)((()=>{null==e||e(o),y({type:"onDragMove",event:o})}))}),[ze.x,ze.y]),(0,a.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:a,scrollAdjustedTranslate:r}=pe.current;if(!e||null==T.current||!t||!r)return;const{onDragOver:o}=K.current,i=a.get(He),l=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,s={active:e,activatorEvent:t,collisions:n,delta:{x:r.x,y:r.y},over:l};(0,k.unstable_batchedUpdates)((()=>{Fe(l),null==o||o(s),y({type:"onDragOver",event:s})}))}),[He]),_((()=>{pe.current={activatorEvent:B,active:R,activeNode:te,collisionRect:Le,collisions:Pe,droppableRects:J,draggableNodes:N,draggingNode:xe,draggingNodeRect:Ee,droppableContainers:O,over:Be,scrollableAncestors:Oe,scrollAdjustedTranslate:ze},I.current={initial:Ee,translated:Le}}),[R,te,Pe,Le,N,xe,Ee,J,O,Be,Oe,ze]),Qe({...oe,delta:A,draggingRect:Le,pointerCoordinates:Re,scrollableAncestors:Oe,scrollableAncestorRects:$e});const qe=(0,a.useMemo)((()=>({active:R,activeNode:te,activeNodeRect:se,activatorEvent:B,collisions:Pe,containerNodeRect:ue,dragOverlay:fe,draggableNodes:N,droppableContainers:O,droppableRects:J,over:Be,measureDroppableContainers:Q,scrollableAncestors:Oe,scrollableAncestorRects:$e,measuringConfiguration:V,measuringScheduled:Z,windowRect:Se})),[R,te,se,B,Pe,ue,fe,N,O,J,Be,Q,Oe,$e,V,Z,Se]),Ve=(0,a.useMemo)((()=>({activatorEvent:B,activators:Ge,active:R,activeNodeRect:se,ariaDescribedById:{draggable:W},dispatch:v,draggableNodes:N,over:Be,measureDroppableContainers:Q})),[B,Ge,R,se,v,W,N,Be,Q]);return a.createElement(ee.Provider,{value:b},a.createElement(yt.Provider,{value:Ve},a.createElement(bt.Provider,{value:qe},a.createElement(Nt.Provider,{value:Ue},c)),a.createElement(wt,{disabled:!1===(null==l?void 0:l.restoreFocus)})),a.createElement(ae,{...l,hiddenTextDescribedById:W}))})),St=(0,a.createContext)(null),Ot="button";function Mt(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=F("Draggable"),{activators:l,activatorEvent:s,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:p}=(0,a.useContext)(yt),{role:g=Ot,roleDescription:h="draggable",tabIndex:f=0}=null!=o?o:{},v=(null==c?void 0:c.id)===t,y=(0,a.useContext)(v?Nt:St),[b,x]=P(),[E,w]=P(),C=function(e,t){return(0,a.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:a,handler:r}=n;return e[a]=e=>{r(e,t)},e}),{})),[e,t])}(l,t),N=z(n);_((()=>(m.set(t,{id:t,key:i,node:b,activatorNode:E,data:N}),()=>{const e=m.get(t);e&&e.key===i&&m.delete(t)})),[m,t]);return{active:c,activatorEvent:s,activeNodeRect:d,attributes:(0,a.useMemo)((()=>({role:g,tabIndex:f,"aria-disabled":r,"aria-pressed":!(!v||g!==Ot)||void 0,"aria-roledescription":h,"aria-describedby":u.draggable})),[r,g,f,v,h,u.draggable]),isDragging:v,listeners:r?void 0:C,node:b,over:p,setNodeRef:x,setActivatorNodeRef:w,transform:y}}const $t={timeout:25};var It=n(1133),Dt=n(2275),Rt=(n(8280),n(6942)),Tt=n.n(Rt),_t=n(9853),jt=n(2279),zt=n(4129),Lt=n(2546),Pt=n(2580);var Ht=n(4440),Bt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function Ft(e){let{suffixCls:t,tagName:n,displayName:r}=e;return e=>{const r=a.forwardRef(((r,o)=>a.createElement(e,Object.assign({ref:o,suffixCls:t,tagName:n},r))));return r}}const Ut=a.forwardRef(((e,t)=>{const{prefixCls:n,suffixCls:r,className:o,tagName:i}=e,l=Bt(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:s}=a.useContext(jt.QO),c=s("layout",n),[d,u,m]=(0,Ht.Ay)(c),p=r?`${c}-${r}`:c;return d(a.createElement(i,Object.assign({className:Tt()(n||p,o,u,m),ref:t},l)))})),Xt=a.forwardRef(((e,t)=>{const{direction:n}=a.useContext(jt.QO),[r,i]=a.useState([]),{prefixCls:l,className:s,rootClassName:c,children:d,hasSider:u,tagName:m,style:p}=e,g=Bt(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),h=(0,_t.A)(g,["suffixCls"]),{getPrefixCls:f,layout:v}=a.useContext(jt.QO),y=f("layout",l),b=function(e,t,n){return"boolean"==typeof n?n:!!e.length||(0,Lt.A)(t).some((e=>e.type===Pt.A))}(r,d,u),[x,E,w]=(0,Ht.Ay)(y),C=Tt()(y,{[`${y}-has-sider`]:b,[`${y}-rtl`]:"rtl"===n},null==v?void 0:v.className,s,c,E,w),N=a.useMemo((()=>({siderHook:{addSider:e=>{i((t=>[].concat((0,o.A)(t),[e])))},removeSider:e=>{i((t=>t.filter((t=>t!==e))))}}})),[]);return x(a.createElement(zt.M.Provider,{value:N},a.createElement(m,Object.assign({ref:t,className:C,style:Object.assign(Object.assign({},null==v?void 0:v.style),p)},h),d)))})),Kt=Ft({tagName:"div",displayName:"Layout"})(Xt),Wt=Ft({suffixCls:"header",tagName:"header",displayName:"Header"})(Ut),Gt=Ft({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(Ut),qt=Ft({suffixCls:"content",tagName:"main",displayName:"Content"})(Ut);const Vt=Kt;Vt.Header=Wt,Vt.Footer=Gt,Vt.Content=qt,Vt.Sider=Pt.A,Vt._InternalSiderContext=Pt.P;var Yt=Vt,Jt=n(3567),Qt=n(8168),Zt=n(4467),en=n(5544),tn=n(45),nn=n(2533),an=n(6928),rn=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],on=a.forwardRef((function(e,t){var n,r=e.prefixCls,o=void 0===r?"rc-switch":r,i=e.className,l=e.checked,s=e.defaultChecked,c=e.disabled,d=e.loadingIcon,u=e.checkedChildren,m=e.unCheckedChildren,p=e.onClick,g=e.onChange,h=e.onKeyDown,f=(0,tn.A)(e,rn),v=(0,nn.A)(!1,{value:l,defaultValue:s}),y=(0,en.A)(v,2),b=y[0],x=y[1];function E(e,t){var n=b;return c||(x(n=e),null==g||g(n,t)),n}var w=Tt()(o,i,(n={},(0,Zt.A)(n,"".concat(o,"-checked"),b),(0,Zt.A)(n,"".concat(o,"-disabled"),c),n));return a.createElement("button",(0,Qt.A)({},f,{type:"button",role:"switch","aria-checked":b,disabled:c,className:w,ref:t,onKeyDown:function(e){e.which===an.A.LEFT?E(!1,e):e.which===an.A.RIGHT&&E(!0,e),null==h||h(e)},onClick:function(e){var t=E(!b,e);null==p||p(t,e)}}),d,a.createElement("span",{className:"".concat(o,"-inner")},a.createElement("span",{className:"".concat(o,"-inner-checked")},u),a.createElement("span",{className:"".concat(o,"-inner-unchecked")},m)))}));on.displayName="Switch";var ln=on,sn=n(6130),cn=n(8119),dn=n(829),un=n(2187),mn=n(4978),pn=n(5905),gn=n(7358),hn=n(4277);const fn=e=>{const{componentCls:t,trackHeightSM:n,trackPadding:a,trackMinWidthSM:r,innerMinMarginSM:o,innerMaxMarginSM:i,handleSizeSM:l,calc:s}=e,c=`${t}-inner`,d=(0,un.zA)(s(l).add(s(a).mul(2)).equal()),u=(0,un.zA)(s(i).mul(2).equal());return{[t]:{[`&${t}-small`]:{minWidth:r,height:n,lineHeight:(0,un.zA)(n),[`${t}-inner`]:{paddingInlineStart:i,paddingInlineEnd:o,[`${c}-checked, ${c}-unchecked`]:{minHeight:n},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${u})`,marginInlineEnd:`calc(100% - ${d} + ${u})`},[`${c}-unchecked`]:{marginTop:s(n).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${t}-handle`]:{width:l,height:l},[`${t}-loading-icon`]:{top:s(s(l).sub(e.switchLoadingIconSize)).div(2).equal(),fontSize:e.switchLoadingIconSize},[`&${t}-checked`]:{[`${t}-inner`]:{paddingInlineStart:o,paddingInlineEnd:i,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${u})`,marginInlineEnd:`calc(-100% + ${d} - ${u})`}},[`${t}-handle`]:{insetInlineStart:`calc(100% - ${(0,un.zA)(s(l).add(a).equal())})`}},[`&:not(${t}-disabled):active`]:{[`&:not(${t}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:s(e.marginXXS).div(2).equal(),marginInlineEnd:s(e.marginXXS).mul(-1).div(2).equal()}},[`&${t}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:s(e.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:s(e.marginXXS).div(2).equal()}}}}}}},vn=e=>{const{componentCls:t,handleSize:n,calc:a}=e;return{[t]:{[`${t}-loading-icon${e.iconCls}`]:{position:"relative",top:a(a(n).sub(e.fontSize)).div(2).equal(),color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${t}-checked ${t}-loading-icon`]:{color:e.switchColor}}}},yn=e=>{const{componentCls:t,trackPadding:n,handleBg:a,handleShadow:r,handleSize:o,calc:i}=e,l=`${t}-handle`;return{[t]:{[l]:{position:"absolute",top:n,insetInlineStart:n,width:o,height:o,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:a,borderRadius:i(o).div(2).equal(),boxShadow:r,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${t}-checked ${l}`]:{insetInlineStart:`calc(100% - ${(0,un.zA)(i(o).add(n).equal())})`},[`&:not(${t}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${t}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},bn=e=>{const{componentCls:t,trackHeight:n,trackPadding:a,innerMinMargin:r,innerMaxMargin:o,handleSize:i,calc:l}=e,s=`${t}-inner`,c=(0,un.zA)(l(i).add(l(a).mul(2)).equal()),d=(0,un.zA)(l(o).mul(2).equal());return{[t]:{[s]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:o,paddingInlineEnd:r,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${s}-checked, ${s}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:n},[`${s}-checked`]:{marginInlineStart:`calc(-100% + ${c} - ${d})`,marginInlineEnd:`calc(100% - ${c} + ${d})`},[`${s}-unchecked`]:{marginTop:l(n).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${t}-checked ${s}`]:{paddingInlineStart:r,paddingInlineEnd:o,[`${s}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${s}-unchecked`]:{marginInlineStart:`calc(100% - ${c} + ${d})`,marginInlineEnd:`calc(-100% + ${c} - ${d})`}},[`&:not(${t}-disabled):active`]:{[`&:not(${t}-checked) ${s}`]:{[`${s}-unchecked`]:{marginInlineStart:l(a).mul(2).equal(),marginInlineEnd:l(a).mul(-1).mul(2).equal()}},[`&${t}-checked ${s}`]:{[`${s}-checked`]:{marginInlineStart:l(a).mul(-1).mul(2).equal(),marginInlineEnd:l(a).mul(2).equal()}}}}}},xn=e=>{const{componentCls:t,trackHeight:n,trackMinWidth:a}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,pn.dF)(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:a,height:n,lineHeight:(0,un.zA)(n),verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${t}-disabled)`]:{background:e.colorTextTertiary}}),(0,pn.K8)(e)),{[`&${t}-checked`]:{background:e.switchColor,[`&:hover:not(${t}-disabled)`]:{background:e.colorPrimaryHover}},[`&${t}-loading, &${t}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${t}-rtl`]:{direction:"rtl"}})}};var En=(0,gn.OF)("Switch",(e=>{const t=(0,hn.oX)(e,{switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchLoadingIconSize:e.calc(e.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[xn(t),bn(t),yn(t),vn(t),fn(t)]}),(e=>{const{fontSize:t,lineHeight:n,controlHeight:a,colorWhite:r}=e,o=t*n,i=a/2,l=o-4,s=i-4;return{trackHeight:o,trackHeightSM:i,trackMinWidth:2*l+8,trackMinWidthSM:2*s+4,trackPadding:2,handleBg:r,handleSize:l,handleSizeSM:s,handleShadow:`0 2px 4px 0 ${new mn.q("#00230b").setAlpha(.2).toRgbString()}`,innerMinMargin:l/2,innerMaxMargin:l+2+4,innerMinMarginSM:s/2,innerMaxMarginSM:s+2+4}})),wn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const Cn=a.forwardRef(((e,t)=>{const{prefixCls:n,size:r,disabled:o,loading:i,className:l,rootClassName:s,style:c,checked:d,value:u,defaultChecked:m,defaultValue:p,onChange:g}=e,h=wn(e,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[f,v]=(0,nn.A)(!1,{value:null!=d?d:u,defaultValue:null!=m?m:p}),{getPrefixCls:y,direction:b,switch:x}=a.useContext(jt.QO),E=a.useContext(cn.A),w=(null!=o?o:E)||i,C=y("switch",n),N=a.createElement("div",{className:`${C}-handle`},i&&a.createElement(Jt.A,{className:`${C}-loading-icon`})),[A,k,S]=En(C),O=(0,dn.A)(r),M=Tt()(null==x?void 0:x.className,{[`${C}-small`]:"small"===O,[`${C}-loading`]:i,[`${C}-rtl`]:"rtl"===b},l,s,k,S),$=Object.assign(Object.assign({},null==x?void 0:x.style),c);return A(a.createElement(sn.A,{component:"Switch"},a.createElement(ln,Object.assign({},h,{checked:f,onChange:function(){v(arguments.length<=0?void 0:arguments[0]),null==g||g.apply(void 0,arguments)},prefixCls:C,className:M,style:$,disabled:w,ref:t,loadingIcon:N}))))})),Nn=Cn;Nn.__ANT_SWITCH=!0;var An=Nn,kn=n(1788);const Sn=(0,kn.A)("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]),On=(0,kn.A)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);var Mn=n(8309),$n=n(8852),In=n(1511);let Dn=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");var Rn=n(8057),Tn=n.n(Rn);const _n=(e,t,n,a)=>({id:Dn(),type:e,position:t,data:{label:a||e,type:e,config:n,connections:{modelClient:null,tools:[],participants:[],termination:null}}}),jn=e=>{const t=[],n=[],a=_n("team",{x:400,y:50},Object.assign({},e));if(t.push(a),"SelectorGroupChat"===e.team_type&&e.model_client){const r=_n("model",{x:200,y:50},e.model_client,e.model_client.model);t.push(r),n.push({id:Dn(),source:r.id,target:a.id,sourceHandle:r.id+"-model-output-handle",targetHandle:a.id+"-model-input-handle",type:"model-connection"})}if(e.participants.forEach(((r,o)=>{var i;const l=(e=>({x:e%3*250,y:250*(Math.floor(e/3)+1)}))(o,e.participants.length),s=_n("agent",l,Object.assign({},r));if(t.push(s),n.push({id:Dn(),source:a.id,target:s.id,sourceHandle:a.id+"-agent-output-handle",targetHandle:s.id+"-agent-input-handle",type:"agent-connection"}),r.model_client){const e=_n("model",{x:l.x-150,y:l.y},r.model_client,r.model_client.model);t.push(e),n.push({id:Dn(),source:e.id,target:s.id,sourceHandle:e.id+"-model-output-handle",targetHandle:s.id+"-model-input-handle",type:"model-connection"})}null===(i=r.tools)||void 0===i||i.forEach(((e,a)=>{const r=_n("tool",{x:l.x+150,y:l.y+100*a},e);t.push(r),n.push({id:Dn(),source:r.id,target:s.id,sourceHandle:r.id+"-tool-output-handle",targetHandle:s.id+"-tool-input-handle",type:"tool-connection"})}))})),null!=e&&e.termination_condition){const r=_n("termination",{x:600,y:50},e.termination_condition);t.push(r),n.push({id:Dn(),source:r.id,target:a.id,sourceHandle:r.id+"-termination-output-handle",targetHandle:a.id+"-termination-input-handle",type:"termination-connection"})}return{nodes:t,edges:n}},zn=(e,t)=>{const n=new(Tn().graphlib.Graph);n.setGraph({rankdir:"LR",nodesep:250,ranksep:150,ranker:"network-simplex",align:"DL"}),n.setDefaultEdgeLabel((()=>({}))),e.forEach((a=>{const r=(n=>{if("model"===n.data.type)return t.some((t=>{var a;return t.source===n.id&&"team"===(null===(a=e.find((e=>e.id===t.target)))||void 0===a?void 0:a.data.type)}))?0:2;switch(n.data.type){case"team":case"termination":return 1;case"agent":return 3;case"tool":return 4;default:return 0}})(a);n.setNode(a.id,{width:272,height:200,rank:r})})),t.forEach((e=>{n.setEdge(e.source,e.target)})),Tn().layout(n);return{nodes:e.map((e=>{const t=n.node(e.id);return Object.assign({},e,{position:{x:t.x-136,y:t.y-100}})})),edges:t}},Ln=e=>"team_type"in e,Pn=e=>"agent_type"in e,Hn=e=>"model_type"in e,Bn=e=>"tool_type"in e,Fn=e=>"termination_type"in e,Un=(0,In.v)(((e,t)=>({nodes:[],edges:[],selectedNodeId:null,history:[],currentHistoryIndex:-1,originalConfig:null,addNode:(t,n,a,r)=>{e((e=>{let i="";Ln(a)?i=a.name||"Team":Pn(a)?i=a.name||"Agent":Hn(a)?i=a.model||"Model":Bn(a)?i=a.name||"Tool":Fn(a)&&(i=a.termination_type||"Termination");const l={id:Dn(),type:t,position:n,data:{label:i||"Node",type:t,config:a}};let s=(0,o.A)(e.nodes),c=(0,o.A)(e.edges);if(r){const n=e.nodes.find((e=>e.id===r));if(n)if("model"===t&&["team","agent"].includes(n.data.type)){const e=c.find((e=>e.target===r&&"model-connection"===e.type));if(e){const t=e.source;s=s.filter((e=>e.id!==t)),c=c.filter((e=>e.source!==t&&e.target!==t))}s.push(l),c.push({id:Dn(),source:l.id,target:r,sourceHandle:l.id+"-model-output-handle",targetHandle:r+"-model-input-handle",type:"model-connection"}),(Ln(n.data.config)&&Hn(a)&&"SelectorGroupChat"===n.data.config.team_type||Pn(n.data.config)&&Hn(a))&&(n.data.config.model_client=a)}else if("termination"===t&&"team"===n.data.type){const e=c.find((e=>e.target===r&&"termination-connection"===e.type));if(e){const t=e.source;s=s.filter((e=>e.id!==t)),c=c.filter((e=>e.source!==t&&e.target!==t))}s.push(l),c.push({id:Dn(),source:l.id,target:r,sourceHandle:l.id+"-termination-output-handle",targetHandle:r+"-termination-input-handle",type:"termination-connection"}),Ln(n.data.config)&&Fn(a)&&(n.data.config.termination_condition=a)}else"tool"===t&&"agent"===n.data.type?(s.push(l),c.push({id:Dn(),source:l.id,target:r,sourceHandle:l.id+"-tool-output-handle",targetHandle:r+"-tool-input-handle",type:"tool-connection"}),Pn(n.data.config)&&Bn(a)&&(n.data.config.tools||(n.data.config.tools=[]),n.data.config.tools.push(a))):"agent"===t&&"team"===n.data.type?(s.push(l),c.push({id:Dn(),source:r,target:l.id,sourceHandle:r+"-agent-output-handle",targetHandle:l.id+"-agent-input-handle",type:"agent-connection"}),Ln(n.data.config)&&Pn(a)&&(n.data.config.participants||(n.data.config.participants=[]),n.data.config.participants.push(a))):s.push(l)}else s.push(l);const{nodes:d,edges:u}=zn(s,c);return{nodes:d,edges:u,history:[].concat((0,o.A)(e.history.slice(0,e.currentHistoryIndex+1)),[{nodes:d,edges:u}]).slice(-50),currentHistoryIndex:e.currentHistoryIndex+1}}))},updateNode:(t,n)=>{e((e=>{const a=e.nodes.map((e=>{if(e.id!==t)return e;return Object.assign({},e,{data:Object.assign({},e.data,n,{label:(()=>{const t=Object.assign({},e.data.config,n.config);return Ln(t)?t.name||"Team":Pn(t)?t.name||"Agent":Hn(t)?t.model||"Model":Bn(t)?t.name||"Tool":Fn(t)?t.termination_type||"Termination":e.data.label})()})})})),r=a.find((e=>e.id===t));if(!r)return e;if("agent"===r.data.type){const n=e.edges.find((e=>"agent-connection"===e.type&&e.target===t));n&&a.forEach((e=>{if(e.id===n.source&&Ln(e.data.config)){const t=r.data.config;e.data.config.participants=e.data.config.participants.map((e=>e.name===t.name?t:e))}}))}if("tool"===r.data.type){const n=e.edges.find((e=>"tool-connection"===e.type&&e.source===t));n&&a.forEach((e=>{if(e.id===n.target&&Pn(e.data.config)){var t;const n=r.data.config;e.data.config.tools=null===(t=e.data.config.tools)||void 0===t?void 0:t.map((e=>e.name===n.name?n:e))}}))}return{nodes:a,history:[].concat((0,o.A)(e.history.slice(0,e.currentHistoryIndex+1)),[{nodes:a,edges:e.edges}]).slice(-50),currentHistoryIndex:e.currentHistoryIndex+1}}))},removeNode:t=>{e((e=>{const n=new Set,a=t=>{const r=e.nodes.find((e=>e.id===t));if(!r)return;n.add(t);const o=e.edges.filter((e=>e.source===t||e.target===t));if("team"===r.data.type)o.filter((e=>"agent-connection"===e.type)).forEach((e=>a(e.target))),o.filter((e=>"model-connection"===e.type)).forEach((e=>a(e.source))),o.filter((e=>"termination-connection"===e.type)).forEach((e=>a(e.source)));else if("agent"===r.data.type){o.filter((e=>"model-connection"===e.type)).forEach((e=>a(e.source))),o.filter((e=>"tool-connection"===e.type)).forEach((e=>a(e.source)));const t=o.find((e=>"agent-connection"===e.type));if(t){const n=e.nodes.find((e=>e.id===t.source));if(n&&Ln(n.data.config)){const e=r.data.config;n.data.config.participants=n.data.config.participants.filter((t=>t.name!==e.name))}}}else if("tool"===r.data.type){const t=o.find((e=>"tool-connection"===e.type));if(t){const n=e.nodes.find((e=>e.id===t.target));if(n&&Pn(n.data.config)){var i;const e=r.data.config;n.data.config.tools=null===(i=n.data.config.tools)||void 0===i?void 0:i.filter((t=>t.name!==e.name))}}}else if("termination"===r.data.type){const t=o.find((e=>"termination-connection"===e.type));if(t){const n=e.nodes.find((e=>e.id===t.target));n&&Ln(n.data.config)&&(n.data.config.termination_condition=void 0)}}};a(t);const r=e.nodes.filter((e=>!n.has(e.id))),i=e.edges.filter((e=>!n.has(e.source)&&!n.has(e.target)));return{nodes:r,edges:i,history:[].concat((0,o.A)(e.history.slice(0,e.currentHistoryIndex+1)),[{nodes:r,edges:i}]).slice(-50),currentHistoryIndex:e.currentHistoryIndex+1}}))},addEdge:t=>{e((e=>{let n=(0,o.A)(e.edges);return"model-connection"===t.type&&(n=n.filter((e=>!(e.target===t.target&&"model-connection"===e.type)))),n.push(t),{edges:n,history:[].concat((0,o.A)(e.history.slice(0,e.currentHistoryIndex+1)),[{nodes:e.nodes,edges:n}]).slice(-50),currentHistoryIndex:e.currentHistoryIndex+1}}))},removeEdge:t=>{e((e=>{const n=e.edges.filter((e=>e.id!==t));return{edges:n,history:[].concat((0,o.A)(e.history.slice(0,e.currentHistoryIndex+1)),[{nodes:e.nodes,edges:n}]).slice(-50),currentHistoryIndex:e.currentHistoryIndex+1}}))},setSelectedNode:t=>{e({selectedNodeId:t})},undo:()=>{e((e=>{if(e.currentHistoryIndex<=0)return e;const t=e.history[e.currentHistoryIndex-1];return Object.assign({},e,{nodes:t.nodes,edges:t.edges,currentHistoryIndex:e.currentHistoryIndex-1})}))},redo:()=>{e((e=>{if(e.currentHistoryIndex>=e.history.length-1)return e;const t=e.history[e.currentHistoryIndex+1];return Object.assign({},e,{nodes:t.nodes,edges:t.edges,currentHistoryIndex:e.currentHistoryIndex+1})}))},syncToJson:()=>{const e=t(),n=e.nodes.filter((e=>"team"===e.data.type));if(0===n.length)return null;return((e,t,n)=>{if(!Ln(e.data.config))return null;const a=Object.assign({},e.data.config),r=n.find((t=>t.target===e.id&&"model-connection"===t.type));if(r){const e=t.find((e=>e.id===r.source));e&&Hn(e.data.config)&&"SelectorGroupChat"===a.team_type&&(a.model_client=e.data.config)}const o=n.find((t=>t.target===e.id&&"termination-connection"===t.type));if(o){const e=t.find((e=>e.id===o.source));e&&Fn(e.data.config)&&(a.termination_condition=e.data.config)}const i=n.filter((t=>t.source===e.id&&"agent-connection"===t.type));return a.participants=i.map((e=>{const a=t.find((t=>t.id===e.target));if(!a||!Pn(a.data.config))return null;const r=Object.assign({},a.data.config),o=n.find((t=>t.target===e.target&&"model-connection"===t.type));if(o){const e=t.find((e=>e.id===o.source));e&&Hn(e.data.config)&&(r.model_client=e.data.config)}const i=n.filter((t=>t.target===e.target&&"tool-connection"===t.type));return r.tools=i.map((e=>{const n=t.find((t=>t.id===e.source));return null==n?void 0:n.data.config})).filter((e=>null!==e)),r})).filter((e=>null!==e)),a})(n[0],e.nodes,e.edges)},layoutNodes:()=>{const{nodes:n,edges:a}=t(),{nodes:r,edges:i}=zn(n,a);e({nodes:r,edges:i,history:[].concat((0,o.A)(t().history.slice(0,t().currentHistoryIndex+1)),[{nodes:r,edges:i}]).slice(-50),currentHistoryIndex:t().currentHistoryIndex+1})},loadFromJson:t=>{const{nodes:n,edges:a}=jn(t),{nodes:r,edges:o}=zn(n,a);return e((e=>({nodes:r,edges:o,originalConfig:t,history:[{nodes:r,edges:o}],currentHistoryIndex:0,selectedNodeId:null}))),{nodes:r,edges:o}},resetHistory:()=>{e((e=>({history:[{nodes:e.nodes,edges:e.edges}],currentHistoryIndex:0})))}})));var Xn=n(6546),Kn=n(8e3),Wn=n(2284),Gn=n(8210),qn=n(9379),Vn=n(754),Yn=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.forceRender,o=e.className,i=e.style,l=e.children,s=e.isActive,c=e.role,d=e.classNames,u=e.styles,m=a.useState(s||r),p=(0,en.A)(m,2),g=p[0],h=p[1];return a.useEffect((function(){(r||s)&&h(!0)}),[r,s]),g?a.createElement("div",{ref:t,className:Tt()("".concat(n,"-content"),(0,Zt.A)((0,Zt.A)({},"".concat(n,"-content-active"),s),"".concat(n,"-content-inactive"),!s),o),style:i,role:c},a.createElement("div",{className:Tt()("".concat(n,"-content-box"),null==d?void 0:d.body),style:null==u?void 0:u.body},l)):null}));Yn.displayName="PanelContent";var Jn=Yn,Qn=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],Zn=a.forwardRef((function(e,t){var n=e.showArrow,r=void 0===n||n,o=e.headerClass,i=e.isActive,l=e.onItemClick,s=e.forceRender,c=e.className,d=e.classNames,u=void 0===d?{}:d,m=e.styles,p=void 0===m?{}:m,g=e.prefixCls,h=e.collapsible,f=e.accordion,v=e.panelKey,y=e.extra,b=e.header,x=e.expandIcon,E=e.openMotion,w=e.destroyInactivePanel,C=e.children,N=(0,tn.A)(e,Qn),A="disabled"===h,k=null!=y&&"boolean"!=typeof y,S=(0,Zt.A)((0,Zt.A)((0,Zt.A)({onClick:function(){null==l||l(v)},onKeyDown:function(e){"Enter"!==e.key&&e.keyCode!==an.A.ENTER&&e.which!==an.A.ENTER||null==l||l(v)},role:f?"tab":"button"},"aria-expanded",i),"aria-disabled",A),"tabIndex",A?-1:0),O="function"==typeof x?x(e):a.createElement("i",{className:"arrow"}),M=O&&a.createElement("div",(0,Qt.A)({className:"".concat(g,"-expand-icon")},["header","icon"].includes(h)?S:{}),O),$=Tt()("".concat(g,"-item"),(0,Zt.A)((0,Zt.A)({},"".concat(g,"-item-active"),i),"".concat(g,"-item-disabled"),A),c),I=Tt()(o,"".concat(g,"-header"),(0,Zt.A)({},"".concat(g,"-collapsible-").concat(h),!!h),u.header),D=(0,qn.A)({className:I,style:p.header},["header","icon"].includes(h)?{}:S);return a.createElement("div",(0,Qt.A)({},N,{ref:t,className:$}),a.createElement("div",D,r&&M,a.createElement("span",(0,Qt.A)({className:"".concat(g,"-header-text")},"header"===h?S:{}),b),k&&a.createElement("div",{className:"".concat(g,"-extra")},y)),a.createElement(Vn.Ay,(0,Qt.A)({visible:i,leavedClassName:"".concat(g,"-content-hidden")},E,{forceRender:s,removeOnLeave:w}),(function(e,t){var n=e.className,r=e.style;return a.createElement(Jn,{ref:t,prefixCls:g,className:n,classNames:u,style:r,styles:p,isActive:i,forceRender:s,role:f?"tabpanel":void 0},C)})))})),ea=Zn,ta=["children","label","key","collapsible","onItemClick","destroyInactivePanel"];var na=function(e,t,n){return Array.isArray(e)?function(e,t){var n=t.prefixCls,r=t.accordion,o=t.collapsible,i=t.destroyInactivePanel,l=t.onItemClick,s=t.activeKey,c=t.openMotion,d=t.expandIcon;return e.map((function(e,t){var u=e.children,m=e.label,p=e.key,g=e.collapsible,h=e.onItemClick,f=e.destroyInactivePanel,v=(0,tn.A)(e,ta),y=String(null!=p?p:t),b=null!=g?g:o,x=null!=f?f:i,E=!1;return E=r?s[0]===y:s.indexOf(y)>-1,a.createElement(ea,(0,Qt.A)({},v,{prefixCls:n,key:y,panelKey:y,isActive:E,accordion:r,openMotion:c,expandIcon:d,header:m,collapsible:b,onItemClick:function(e){"disabled"!==b&&(l(e),null==h||h(e))},destroyInactivePanel:x}),u)}))}(e,n):(0,Lt.A)(t).map((function(e,t){return function(e,t,n){if(!e)return null;var r=n.prefixCls,o=n.accordion,i=n.collapsible,l=n.destroyInactivePanel,s=n.onItemClick,c=n.activeKey,d=n.openMotion,u=n.expandIcon,m=e.key||String(t),p=e.props,g=p.header,h=p.headerClass,f=p.destroyInactivePanel,v=p.collapsible,y=p.onItemClick,b=!1;b=o?c[0]===m:c.indexOf(m)>-1;var x=null!=v?v:i,E={key:m,panelKey:m,header:g,headerClass:h,isActive:b,prefixCls:r,destroyInactivePanel:null!=f?f:l,openMotion:d,accordion:o,children:e.props.children,onItemClick:function(e){"disabled"!==x&&(s(e),null==y||y(e))},expandIcon:u,collapsible:x};return"string"==typeof e.type?e:(Object.keys(E).forEach((function(e){void 0===E[e]&&delete E[e]})),a.cloneElement(e,E))}(e,t,n)}))},aa=n(2065);function ra(e){var t=e;if(!Array.isArray(t)){var n=(0,Wn.A)(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var oa=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-collapse":n,i=e.destroyInactivePanel,l=void 0!==i&&i,s=e.style,c=e.accordion,d=e.className,u=e.children,m=e.collapsible,p=e.openMotion,g=e.expandIcon,h=e.activeKey,f=e.defaultActiveKey,v=e.onChange,y=e.items,b=Tt()(r,d),x=(0,nn.A)([],{value:h,onChange:function(e){return null==v?void 0:v(e)},defaultValue:f,postState:ra}),E=(0,en.A)(x,2),w=E[0],C=E[1];(0,Gn.Ay)(!u,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var N=na(y,u,{prefixCls:r,accordion:c,openMotion:p,expandIcon:g,collapsible:m,destroyInactivePanel:l,onItemClick:function(e){return C((function(){return c?w[0]===e?[]:[e]:w.indexOf(e)>-1?w.filter((function(t){return t!==e})):[].concat((0,o.A)(w),[e])}))},activeKey:w});return a.createElement("div",(0,Qt.A)({ref:t,className:b,style:s,role:c?"tablist":void 0},(0,aa.A)(e,{aria:!0,data:!0})),N)})),ia=Object.assign(oa,{Panel:ea}),la=ia,sa=(ia.Panel,n(3723)),ca=n(682);const da=a.forwardRef(((e,t)=>{const{getPrefixCls:n}=a.useContext(jt.QO),{prefixCls:r,className:o,showArrow:i=!0}=e,l=n("collapse",r),s=Tt()({[`${l}-no-arrow`]:!i},o);return a.createElement(la.Panel,Object.assign({ref:t},e,{prefixCls:l,className:s}))}));var ua=da,ma=n(977);const pa=e=>{const{componentCls:t,contentBg:n,padding:a,headerBg:r,headerPadding:o,collapseHeaderPaddingSM:i,collapseHeaderPaddingLG:l,collapsePanelBorderRadius:s,lineWidth:c,lineType:d,colorBorder:u,colorText:m,colorTextHeading:p,colorTextDisabled:g,fontSizeLG:h,lineHeight:f,lineHeightLG:v,marginSM:y,paddingSM:b,paddingLG:x,paddingXS:E,motionDurationSlow:w,fontSizeIcon:C,contentPadding:N,fontHeight:A,fontHeightLG:k}=e,S=`${(0,un.zA)(c)} ${d} ${u}`;return{[t]:Object.assign(Object.assign({},(0,pn.dF)(e)),{backgroundColor:r,border:S,borderRadius:s,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:S,"&:last-child":{[`\n            &,\n            & > ${t}-header`]:{borderRadius:`0 0 ${(0,un.zA)(s)} ${(0,un.zA)(s)}`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:o,color:p,lineHeight:f,cursor:"pointer",transition:`all ${w}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},[`${t}-expand-icon`]:{height:A,display:"flex",alignItems:"center",paddingInlineEnd:y},[`${t}-arrow`]:Object.assign(Object.assign({},(0,pn.Nk)()),{fontSize:C,transition:`transform ${w}`,svg:{transition:`transform ${w}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-collapsible-header`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-collapsible-icon`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:m,backgroundColor:n,borderTop:S,[`& > ${t}-content-box`]:{padding:N},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:i,paddingInlineStart:E,[`> ${t}-expand-icon`]:{marginInlineStart:e.calc(b).sub(E).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:b}}},"&-large":{[`> ${t}-item`]:{fontSize:h,lineHeight:v,[`> ${t}-header`]:{padding:l,paddingInlineStart:a,[`> ${t}-expand-icon`]:{height:k,marginInlineStart:e.calc(x).sub(a).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:x}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${(0,un.zA)(s)} ${(0,un.zA)(s)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:g,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:y}}}}})}},ga=e=>{const{componentCls:t}=e,n=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},ha=e=>{const{componentCls:t,headerBg:n,paddingXXS:a,colorBorder:r}=e;return{[`${t}-borderless`]:{backgroundColor:n,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${r}`},[`\n        > ${t}-item:last-child,\n        > ${t}-item:last-child ${t}-header\n      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:a}}}},fa=e=>{const{componentCls:t,paddingSM:n}=e;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:n}}}}}};var va=(0,gn.OF)("Collapse",(e=>{const t=(0,hn.oX)(e,{collapseHeaderPaddingSM:`${(0,un.zA)(e.paddingXS)} ${(0,un.zA)(e.paddingSM)}`,collapseHeaderPaddingLG:`${(0,un.zA)(e.padding)} ${(0,un.zA)(e.paddingLG)}`,collapsePanelBorderRadius:e.borderRadiusLG});return[pa(t),ha(t),fa(t),ga(t),(0,ma.A)(t)]}),(e=>({headerPadding:`${e.paddingSM}px ${e.padding}px`,headerBg:e.colorFillAlter,contentPadding:`${e.padding}px 16px`,contentBg:e.colorBgContainer})));const ya=a.forwardRef(((e,t)=>{const{getPrefixCls:n,direction:r,collapse:o}=a.useContext(jt.QO),{prefixCls:i,className:l,rootClassName:s,style:c,bordered:d=!0,ghost:u,size:m,expandIconPosition:p="start",children:g,expandIcon:h}=e,f=(0,dn.A)((e=>{var t;return null!==(t=null!=m?m:e)&&void 0!==t?t:"middle"})),v=n("collapse",i),y=n(),[b,x,E]=va(v);const w=a.useMemo((()=>"left"===p?"start":"right"===p?"end":p),[p]),C=null!=h?h:null==o?void 0:o.expandIcon,N=a.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t="function"==typeof C?C(e):a.createElement(Kn.A,{rotate:e.isActive?90:void 0,"aria-label":e.isActive?"expanded":"collapsed"});return(0,ca.Ob)(t,(()=>{var e;return{className:Tt()(null===(e=null==t?void 0:t.props)||void 0===e?void 0:e.className,`${v}-arrow`)}}))}),[C,v]),A=Tt()(`${v}-icon-position-${w}`,{[`${v}-borderless`]:!d,[`${v}-rtl`]:"rtl"===r,[`${v}-ghost`]:!!u,[`${v}-${f}`]:"middle"!==f},null==o?void 0:o.className,l,s,x,E),k=Object.assign(Object.assign({},(0,sa.A)(y)),{motionAppear:!1,leavedClassName:`${v}-content-hidden`}),S=a.useMemo((()=>g?(0,Lt.A)(g).map(((e,t)=>{var n,a;if(null===(n=e.props)||void 0===n?void 0:n.disabled){const n=null!==(a=e.key)&&void 0!==a?a:String(t),{disabled:r,collapsible:o}=e.props,i=Object.assign(Object.assign({},(0,_t.A)(e.props,["disabled"])),{key:n,collapsible:null!=o?o:r?"disabled":void 0});return(0,ca.Ob)(e,i)}return e})):null),[g]);return b(a.createElement(la,Object.assign({ref:t,openMotion:k},(0,_t.A)(e,["rootClassName"]),{expandIcon:N,prefixCls:v,className:A,style:Object.assign(Object.assign({},null==o?void 0:o.style),c)}),S))}));var ba=Object.assign(ya,{Panel:ua}),xa=n(7073),Ea=n(6816),wa=n(5680),Ca=n(3324),Na=n(942),Aa=n(5107);const ka=e=>{let{id:t,type:n,config:r,label:o,icon:i}=e;const{attributes:l,listeners:s,setNodeRef:c,transform:d,isDragging:u}=Mt({id:t,data:{current:{type:n,config:r,label:o}}}),m={transform:q.Transform.toString(d),opacity:u?.5:void 0};return a.createElement("div",Object.assign({ref:c,style:m},l,s,{className:"p-2 text-primary mb-2 border border-secondary rounded cursor-move hover:bg-secondary transition-colors"}),a.createElement("div",{className:"flex items-center gap-2"},i,a.createElement("span",null,o)))},Sa=()=>{const[e,t]=a.useState(""),[n,r]=a.useState(!1),o=(0,N.t)((e=>e.getDefaultGallery()));if(!o)return null;const i=a.useMemo((()=>[{title:"Agents",type:"agent",items:o.items.components.agents.map((e=>({label:e.name,config:e}))),icon:a.createElement(b.A,{className:"w-4 h-4"})},{title:"Models",type:"model",items:o.items.components.models.map((e=>({label:e.model_type+" - "+e.model,config:e}))),icon:a.createElement(xa.A,{className:"w-4 h-4"})},{title:"Tools",type:"tool",items:o.items.components.tools.map((e=>({label:e.name,config:e}))),icon:a.createElement(Ea.A,{className:"w-4 h-4"})},{title:"Terminations",type:"termination",items:o.items.components.terminations.map((e=>({label:""+e.termination_type,config:e}))),icon:a.createElement(wa.A,{className:"w-4 h-4"})}]),[o]).map((t=>{const n=t.items.filter((t=>t.label.toLowerCase().includes(e.toLowerCase())));return{key:t.title,label:a.createElement("div",{className:"flex items-center gap-2 font-medium"},t.icon,a.createElement("span",null,t.title),a.createElement("span",{className:"text-xs text-gray-500"},"(",n.length,")")),children:a.createElement("div",{className:"space-y-2"},n.map(((e,n)=>a.createElement(ka,{key:n,id:t.title.toLowerCase()+"-"+n,type:t.type,config:e.config,label:e.label,icon:t.icon}))))}}));return n?a.createElement("div",{onClick:()=>r(!1),className:"absolute group top-4 left-4 bg-primary shadow-md rounded px-4 pr-2 py-2 cursor-pointer transition-all duration-300 z-50 flex items-center gap-2"},a.createElement("span",null,"Show Component Library"),a.createElement("button",{onClick:()=>r(!1),className:"p-1 group-hover:bg-tertiary rounded transition-colors",title:"Maximize Library"},a.createElement(Ca.A,{className:"w-4 h-4"}))):a.createElement(Pt.A,{width:300,className:"bg-primary z-10 mr-2 border-r border-secondary"},a.createElement("div",{className:"rounded p-2 pt-2"},a.createElement("div",{className:"flex justify-between items-center mb-2"},a.createElement("div",{className:"text-normal"},"Component Library"),a.createElement("button",{onClick:()=>r(!0),className:"p-1 hover:bg-tertiary rounded transition-colors",title:"Minimize Library"},a.createElement(Na.A,{className:"w-4 h-4"}))),a.createElement("div",{className:"mb-4 text-secondary"},"Drag a component to add it to the team"),a.createElement("div",{className:"flex items-center gap-2 mb-4"},a.createElement(Xn.A,{placeholder:"Search components...",onChange:e=>t(e.target.value),className:"flex-1 p-2"})),a.createElement(ba,{items:i,defaultActiveKey:["Agents"],bordered:!1,expandIcon:e=>{let{isActive:t}=e;return a.createElement(Aa.A,{strokeWidth:1,className:(t?"transform rotate-180":"")+" w-4 h-4"})}})))};var Oa=n(8587),Ma=n(6274),$a=n(8188);const Ia=["data"],Da={team:Ma.A,agent:b.A,tool:Ea.A,model:xa.A,termination:wa.A},Ra=e=>{var t,n,r;let{accepts:o,children:i,className:l,id:s}=e;const{isOver:c,setNodeRef:d,active:u}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=F("Droppable"),{active:l,dispatch:s,over:c,measureDroppableContainers:d}=(0,a.useContext)(yt),u=(0,a.useRef)({disabled:n}),m=(0,a.useRef)(!1),p=(0,a.useRef)(null),g=(0,a.useRef)(null),{disabled:h,updateMeasurementsFor:f,timeout:v}={...$t,...o},y=z(null!=f?f:r),b=rt({callback:(0,a.useCallback)((()=>{m.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout((()=>{d(Array.isArray(y.current)?y.current:[y.current]),g.current=null}),v)):m.current=!0}),[v]),disabled:h||!l}),x=(0,a.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),m.current=!1),e&&b.observe(e))}),[b]),[E,w]=P(x),C=z(t);return(0,a.useEffect)((()=>{b&&E.current&&(b.disconnect(),m.current=!1,b.observe(E.current))}),[E,b]),(0,a.useEffect)((()=>(s({type:re.RegisterDroppable,element:{id:r,key:i,disabled:n,node:E,rect:p,data:C}}),()=>s({type:re.UnregisterDroppable,key:i,id:r}))),[r]),(0,a.useEffect)((()=>{n!==u.current.disabled&&(s({type:re.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)}),[r,i,n,s]),{active:l,rect:p,isOver:(null==c?void 0:c.id)===r,node:E,over:c,setNodeRef:w}}({id:s,data:{accepts:o}}),m=c&&(null==u||null===(t=u.data)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.current)||void 0===r?void 0:r.type)&&o.includes(u.data.current.current.type);return a.createElement("div",{ref:d,className:"droppable-zone p-2 "+(m?"can-drop":"")+" "+(l||"")},i)},Ta=e=>{let{id:t,data:n,selected:r,dragHandle:o,icon:i,children:l,headerContent:s,descriptionContent:c,className:d,onEditClick:u}=e;const m=Un((e=>e.removeNode)),p=Un((e=>e.setSelectedNode)),g="team"!==n.type;return a.createElement("div",{ref:o,className:"\n        bg-white text-primary relative rounded-lg shadow-lg w-72 \n        "+(r?"ring-2 ring-accent":"")+"\n        "+(d||"")+" \n        transition-all duration-200\n      "},a.createElement("div",{className:"border-b p-3 bg-gray-50 rounded-t-lg"},a.createElement("div",{className:"flex items-center justify-between min-w-0"},a.createElement("div",{className:"flex items-center gap-2 min-w-0 flex-1"},a.createElement(i,{className:"flex-shrink-0 w-5 h-5 text-gray-600"}),a.createElement("span",{className:"font-medium text-gray-800 truncate"},n.label)),a.createElement("div",{className:"flex items-center gap-2 flex-shrink-0"},a.createElement("span",{className:"text-xs px-2 py-1 bg-gray-200 rounded text-gray-700"},n.type),a.createElement("button",{onClick:e=>{e.stopPropagation(),p(t)},className:"p-1 hover:bg-secondary rounded"},a.createElement($a.A,{className:"w-4 h-4 text-accent"})),g&&a.createElement(a.Fragment,null,a.createElement("button",{onClick:e=>{console.log("remove node",t),e.stopPropagation(),t&&m(t)},className:"p-1 hover:bg-red-100 rounded"},a.createElement(y.A,{className:"w-4 h-4 text-red-500"}))))),s),n.config.description&&a.createElement("div",{className:"px-3 py-2 border-b text-sm text-gray-600"},a.createElement(w.PA,{content:n.config.description,textThreshold:150})),a.createElement("div",{className:"p-3 space-y-2"},l))},_a=e=>{let{title:t,children:n}=e;return a.createElement("div",{className:"space-y-1 relative"},a.createElement("h4",{className:"text-xs font-medium text-gray-500 uppercase"},t),a.createElement("div",{className:"bg-gray-50 rounded p-2"},n))},ja=e=>{let{connected:t,label:n}=e;return a.createElement("span",{className:"\n      text-xs px-2 py-1 rounded-full\n      "+(t?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600")+"\n    "},n)},za={team:e=>{var t,n;const r=e.data.config,o="SelectorGroupChat"===r.team_type&&!!r.model_client,i=(null===(t=r.participants)||void 0===t?void 0:t.length)||0;return a.createElement(Ta,Object.assign({},e,{icon:Da.team,headerContent:a.createElement("div",{className:"flex gap-2 mt-2"},a.createElement(ja,{connected:o,label:"Model"}),a.createElement(ja,{connected:i>0,label:i+" Agent "+(i>1?"s":"")})),descriptionContent:a.createElement("div",null,a.createElement("div",null,"Type: ",r.team_type),"SelectorGroupChat"===r.team_type&&r.selector_prompt&&a.createElement("div",{className:"mt-1 text-xs"},"Selector:"," ",a.createElement(w.PA,{content:r.selector_prompt,textThreshold:150})))}),"SelectorGroupChat"===r.team_type&&a.createElement(_a,{title:"Model"},a.createElement(It.h7,{type:"target",position:Dt.yX.Left,id:e.id+"-model-input-handle",className:"my-left-handle"}),a.createElement("div",{className:"relative"},o&&a.createElement("div",{className:"text-sm"},r.model_client.model),a.createElement(Ra,{id:e.id+"-model-zone",accepts:["model"]},a.createElement("div",{className:"text-secondary text-xs my-1 text-center"},"Drop model here")))),a.createElement(_a,{title:a.createElement("div",null,"Agents"," ",a.createElement("span",{className:"text-xs text-accent"},"(",i,")"))},a.createElement(It.h7,{type:"source",position:Dt.yX.Right,id:e.id+"-agent-output-handle",className:"my-right-handle"}),a.createElement("div",{className:"space-y-1"},null===(n=r.participants)||void 0===n?void 0:n.map(((e,t)=>a.createElement("div",{key:t,className:"relative text-sm py-1 px-2 bg-white rounded flex items-center gap-2"},a.createElement(xa.A,{className:"w-4 h-4 text-gray-500"}),a.createElement("span",null,e.name)))),a.createElement(Ra,{id:e.id+"-agent-zone",accepts:["agent"]},a.createElement("div",{className:"text-secondary text-xs my-1 text-center"},"Drop agents here")))),a.createElement(_a,{title:"Terminations"},r.termination_condition&&a.createElement(It.h7,{type:"target",position:Dt.yX.Left,id:e.id+"-termination-input-handle",className:"my-left-handle"}),a.createElement("div",{className:"space-y-1"},r.termination_condition&&a.createElement("div",{className:"text-sm py-1 px-2 bg-white rounded flex items-center gap-2"},a.createElement(wa.A,{className:"w-4 h-4 text-gray-500"}),a.createElement("span",null,r.termination_condition.termination_type)),a.createElement(Ra,{id:e.id+"-termination-zone",accepts:["termination"]},a.createElement("div",{className:"text-secondary text-xs my-1 text-center"},"Drop termination here")))))},agent:e=>{var t;const n=e.data.config,r=!!n.model_client,o=(null===(t=n.tools)||void 0===t?void 0:t.length)||0;return a.createElement(Ta,Object.assign({},e,{icon:Da.agent,headerContent:a.createElement("div",{className:"flex gap-2 mt-2"},a.createElement(ja,{connected:r,label:"Model"}),a.createElement(ja,{connected:o>0,label:o+" Tools"})),descriptionContent:a.createElement("div",null,a.createElement("div",null,"Type: ",n.agent_type),n.system_message&&a.createElement("div",{className:"mt-1 text-xs"},a.createElement(w.PA,{content:n.system_message,textThreshold:150})))}),a.createElement(It.h7,{type:"target",position:Dt.yX.Left,id:e.id+"-agent-input-handle",className:"my-left-handle"}),a.createElement(_a,{title:"Model"},a.createElement(It.h7,{type:"target",position:Dt.yX.Left,id:e.id+"-model-input-handle",className:"my-left-handle"}),a.createElement("div",{className:"relative"},n.model_client&&a.createElement(a.Fragment,null," ",a.createElement("div",{className:"text-sm"},n.model_client.model)),a.createElement(Ra,{id:e.id+"-model-zone",accepts:["model"]},a.createElement("div",{className:"text-secondary text-xs my-1 text-center"},"Drop model here")))),a.createElement(_a,{title:"Tools"},a.createElement(It.h7,{type:"target",position:Dt.yX.Left,id:e.id+"-tool-input-handle",className:"my-left-handle"}),a.createElement("div",{className:"space-y-1"},n.tools&&o>0&&a.createElement("div",{className:"space-y-1"},n.tools.map(((e,t)=>a.createElement("div",{key:t,className:"relative text-sm py-1 px-2 bg-white rounded flex items-center gap-2"},a.createElement(Ea.A,{className:"w-4 h-4 text-gray-500"}),a.createElement("span",null,e.name))))),a.createElement(Ra,{id:e.id+"-tool-zone",accepts:["tool"]},a.createElement("div",{className:"text-secondary text-xs my-1 text-center"},"Drop tools here")))))},model:e=>{const t=e.data.config;return a.createElement(Ta,Object.assign({},e,{icon:Da.model,descriptionContent:a.createElement("div",null,a.createElement("div",null,"Type: ",t.model_type),t.base_url&&a.createElement("div",{className:"mt-1 text-xs"},"URL: ",t.base_url))}),a.createElement(It.h7,{type:"source",position:Dt.yX.Right,id:e.id+"-model-output-handle",className:"my-right-handle"}),a.createElement(_a,{title:"Configuration"},a.createElement("div",{className:"text-sm"},"Model: ",t.model)))},tool:e=>{const t=e.data.config;return a.createElement(Ta,Object.assign({},e,{icon:Da.tool,descriptionContent:a.createElement("div",null,"Tool Type: ",t.tool_type)}),a.createElement(It.h7,{type:"source",position:Dt.yX.Right,id:e.id+"-tool-output-handle",className:"my-right-handle"}),a.createElement(_a,{title:"Configuration"},a.createElement("div",{className:"text-sm"},t.description)),a.createElement(_a,{title:"Content"},a.createElement("div",{className:"text-sm break-all"},a.createElement(w.PA,{content:t.content||"",textThreshold:150}))))},termination:e=>{const t=e.data.config;return a.createElement(Ta,Object.assign({},e,{icon:Da.termination,descriptionContent:a.createElement("div",null,"Type: ",t.termination_type)}),a.createElement(It.h7,{type:"source",position:Dt.yX.Right,id:e.id+"-termination-output-handle",className:"my-right-handle"}),a.createElement(_a,{title:"Configuration"},a.createElement("div",{className:"text-sm"},"MaxMessageTermination"===t.termination_type&&a.createElement("div",null,"Max Messages: ",t.max_messages),"TextMentionTermination"===t.termination_type&&a.createElement("div",null,"Text: ",t.text))))}},La={"model-connection":{stroke:"rgb(59, 130, 246)"},"tool-connection":{stroke:"rgb(34, 197, 94)"},"agent-connection":{stroke:"rgb(168, 85, 247)"},"termination-connection":{stroke:"rgb(255, 159, 67)"}},Pa=e=>{let{data:t}=e,n=(0,Oa.A)(e,Ia);const[r]=(0,Dt.Fp)(n),o=(null==t?void 0:t.type)||"model-connection";return a.createElement(It.tE,Object.assign({path:r,style:Object.assign({},La[o],{strokeWidth:2})},n))},Ha={"model-connection":Pa,"tool-connection":Pa,"agent-connection":Pa,"termination-connection":Pa};var Ba=n(518);const Fa=(0,kn.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var Ua=n(468),Xa=n(8424);const Ka=(0,kn.A)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Wa=(0,kn.A)("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);var Ga=n(4718);var qa=e=>{let{isJsonMode:t,isFullscreen:n,showGrid:r,canUndo:o,canRedo:i,isDirty:l,onToggleView:s,onUndo:c,onRedo:d,onSave:p,onToggleGrid:g,onToggleFullscreen:h,onAutoLayout:f,onToggleMiniMap:v}=e;const y=[{key:"autoLayout",label:"Auto Layout",icon:a.createElement(Fa,{size:16}),onClick:f},{key:"grid",label:"Show Grid",icon:a.createElement(Ua.A,{size:16}),onClick:g},{key:"minimap",label:"Show Mini Map",icon:a.createElement(Xa.A,{size:16}),onClick:v}];return a.createElement("div",{className:(n?"fixed top-6 right-6":"absolute top-2 right-2")+" bg-secondary hover:bg-secondary rounded shadow-sm min-w-[200px] z-[60]"},a.createElement("div",{className:"p-1 flex items-center gap-1"},!t&&a.createElement(a.Fragment,null,a.createElement(u.A,{title:"Undo"},a.createElement(m.Ay,{type:"text",icon:a.createElement(Ka,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",onClick:c,disabled:!o})),a.createElement(u.A,{title:"Redo"},a.createElement(m.Ay,{type:"text",icon:a.createElement(Wa,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:!i})),a.createElement(u.A,{title:n?"Exit Fullscreen":"Enter Fullscreen"},a.createElement(m.Ay,{type:"text",icon:n?a.createElement(Na.A,{size:18}):a.createElement(Ca.A,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary",onClick:h}))),a.createElement(u.A,{title:"Save Changes"},a.createElement(m.Ay,{type:"text",icon:a.createElement("div",{className:"relative"},a.createElement($n.A,{size:18}),l&&a.createElement("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",onClick:p})),a.createElement(u.A,{title:t?"Switch to Visual":"Switch to JSON"},a.createElement(m.Ay,{type:"text",icon:t?a.createElement(Sn,{size:18}):a.createElement(On,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary",onClick:s})),!t&&a.createElement(Ba.A,{menu:{items:y},trigger:["click"],overlayStyle:{zIndex:1001},placement:"bottomRight"},a.createElement(m.Ay,{type:"text",icon:a.createElement(Ga.A,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary",title:"More Options"}))))},Va=n(9872),Ya=n(2702),Ja=n(8448),Qa=n(2595),Za=n(981),er=a.createContext(null),tr=a.createContext({}),nr=er,ar=n(8719),rr=["prefixCls","className","containerRef"];var or=function(e){var t=e.prefixCls,n=e.className,r=e.containerRef,o=(0,tn.A)(e,rr),i=a.useContext(tr).panel,l=(0,ar.xK)(i,r);return a.createElement("div",(0,Qt.A)({className:Tt()("".concat(t,"-content"),n),role:"dialog",ref:l},(0,aa.A)(e,{aria:!0}),{"aria-modal":"true"},o))};function ir(e){return"string"==typeof e&&String(Number(e))===e?((0,Gn.Ay)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var lr={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function sr(e,t){var n,r,o,i=e.prefixCls,l=e.open,s=e.placement,c=e.inline,d=e.push,u=e.forceRender,m=e.autoFocus,p=e.keyboard,g=e.classNames,h=e.rootClassName,f=e.rootStyle,v=e.zIndex,y=e.className,b=e.id,x=e.style,E=e.motion,w=e.width,C=e.height,N=e.children,A=e.mask,k=e.maskClosable,S=e.maskMotion,O=e.maskClassName,M=e.maskStyle,$=e.afterOpenChange,I=e.onClose,D=e.onMouseEnter,R=e.onMouseOver,T=e.onMouseLeave,_=e.onClick,j=e.onKeyDown,z=e.onKeyUp,L=e.styles,P=e.drawerRender,H=a.useRef(),B=a.useRef(),F=a.useRef();a.useImperativeHandle(t,(function(){return H.current}));a.useEffect((function(){var e;l&&m&&(null===(e=H.current)||void 0===e||e.focus({preventScroll:!0}))}),[l]);var U=a.useState(!1),X=(0,en.A)(U,2),K=X[0],W=X[1],G=a.useContext(nr),q=null!==(n=null!==(r=null===(o="boolean"==typeof d?d?{}:{distance:0}:d||{})||void 0===o?void 0:o.distance)&&void 0!==r?r:null==G?void 0:G.pushDistance)&&void 0!==n?n:180,V=a.useMemo((function(){return{pushDistance:q,push:function(){W(!0)},pull:function(){W(!1)}}}),[q]);a.useEffect((function(){var e,t;l?null==G||null===(e=G.push)||void 0===e||e.call(G):null==G||null===(t=G.pull)||void 0===t||t.call(G)}),[l]),a.useEffect((function(){return function(){var e;null==G||null===(e=G.pull)||void 0===e||e.call(G)}}),[]);var Y=A&&a.createElement(Vn.Ay,(0,Qt.A)({key:"mask"},S,{visible:l}),(function(e,t){var n=e.className,r=e.style;return a.createElement("div",{className:Tt()("".concat(i,"-mask"),n,null==g?void 0:g.mask,O),style:(0,qn.A)((0,qn.A)((0,qn.A)({},r),M),null==L?void 0:L.mask),onClick:k&&l?I:void 0,ref:t})})),J="function"==typeof E?E(s):E,Q={};if(K&&q)switch(s){case"top":Q.transform="translateY(".concat(q,"px)");break;case"bottom":Q.transform="translateY(".concat(-q,"px)");break;case"left":Q.transform="translateX(".concat(q,"px)");break;default:Q.transform="translateX(".concat(-q,"px)")}"left"===s||"right"===s?Q.width=ir(w):Q.height=ir(C);var Z={onMouseEnter:D,onMouseOver:R,onMouseLeave:T,onClick:_,onKeyDown:j,onKeyUp:z},ee=a.createElement(Vn.Ay,(0,Qt.A)({key:"panel"},J,{visible:l,forceRender:u,onVisibleChanged:function(e){null==$||$(e)},removeOnLeave:!1,leavedClassName:"".concat(i,"-content-wrapper-hidden")}),(function(t,n){var r=t.className,o=t.style,l=a.createElement(or,(0,Qt.A)({id:b,containerRef:n,prefixCls:i,className:Tt()(y,null==g?void 0:g.content),style:(0,qn.A)((0,qn.A)({},x),null==L?void 0:L.content)},(0,aa.A)(e,{aria:!0}),Z),N);return a.createElement("div",(0,Qt.A)({className:Tt()("".concat(i,"-content-wrapper"),null==g?void 0:g.wrapper,r),style:(0,qn.A)((0,qn.A)((0,qn.A)({},Q),o),null==L?void 0:L.wrapper)},(0,aa.A)(e,{data:!0})),P?P(l):l)})),te=(0,qn.A)({},f);return v&&(te.zIndex=v),a.createElement(nr.Provider,{value:V},a.createElement("div",{className:Tt()(i,"".concat(i,"-").concat(s),h,(0,Zt.A)((0,Zt.A)({},"".concat(i,"-open"),l),"".concat(i,"-inline"),c)),style:te,tabIndex:-1,ref:H,onKeyDown:function(e){var t=e.keyCode,n=e.shiftKey;switch(t){case an.A.TAB:var a;if(t===an.A.TAB)if(n||document.activeElement!==F.current){if(n&&document.activeElement===B.current){var r;null===(r=F.current)||void 0===r||r.focus({preventScroll:!0})}}else null===(a=B.current)||void 0===a||a.focus({preventScroll:!0});break;case an.A.ESC:I&&p&&(e.stopPropagation(),I(e))}}},Y,a.createElement("div",{tabIndex:0,ref:B,style:lr,"aria-hidden":"true","data-sentinel":"start"}),ee,a.createElement("div",{tabIndex:0,ref:F,style:lr,"aria-hidden":"true","data-sentinel":"end"})))}var cr=a.forwardRef(sr);var dr=function(e){var t=e.open,n=void 0!==t&&t,r=e.prefixCls,o=void 0===r?"rc-drawer":r,i=e.placement,l=void 0===i?"right":i,s=e.autoFocus,c=void 0===s||s,d=e.keyboard,u=void 0===d||d,m=e.width,p=void 0===m?378:m,g=e.mask,h=void 0===g||g,f=e.maskClosable,v=void 0===f||f,y=e.getContainer,b=e.forceRender,x=e.afterOpenChange,E=e.destroyOnClose,w=e.onMouseEnter,C=e.onMouseOver,N=e.onMouseLeave,A=e.onClick,k=e.onKeyDown,S=e.onKeyUp,O=e.panelRef,M=a.useState(!1),$=(0,en.A)(M,2),I=$[0],D=$[1];var R=a.useState(!1),T=(0,en.A)(R,2),_=T[0],j=T[1];(0,Za.A)((function(){j(!0)}),[]);var z=!!_&&n,L=a.useRef(),P=a.useRef();(0,Za.A)((function(){z&&(P.current=document.activeElement)}),[z]);var H=a.useMemo((function(){return{panel:O}}),[O]);if(!b&&!I&&!z&&E)return null;var B={onMouseEnter:w,onMouseOver:C,onMouseLeave:N,onClick:A,onKeyDown:k,onKeyUp:S},F=(0,qn.A)((0,qn.A)({},e),{},{open:z,prefixCls:o,placement:l,autoFocus:c,keyboard:u,width:p,mask:h,maskClosable:v,inline:!1===y,afterOpenChange:function(e){var t,n;(D(e),null==x||x(e),e||!P.current||null!==(t=L.current)&&void 0!==t&&t.contains(P.current))||(null===(n=P.current)||void 0===n||n.focus({preventScroll:!0}))},ref:L},B);return a.createElement(tr.Provider,{value:H},a.createElement(Qa.A,{open:z||b||I,autoDestroy:!1,getContainer:y,autoLock:h&&(z||I)},a.createElement(cr,F)))},ur=n(2897),mr=n(275),pr=n(2616),gr=n(8557),hr=n(64),fr=n(7072);var vr=e=>{var t,n;const{prefixCls:r,title:o,footer:i,extra:l,loading:s,onClose:c,headerStyle:d,bodyStyle:u,footerStyle:m,children:p,classNames:g,styles:h}=e,{drawer:f}=a.useContext(jt.QO),v=a.useCallback((e=>a.createElement("button",{type:"button",onClick:c,"aria-label":"Close",className:`${r}-close`},e)),[c]),[y,b]=(0,hr.A)((0,hr.d)(e),(0,hr.d)(f),{closable:!0,closeIconRender:v}),x=a.useMemo((()=>{var e,t;return o||y?a.createElement("div",{style:Object.assign(Object.assign(Object.assign({},null===(e=null==f?void 0:f.styles)||void 0===e?void 0:e.header),d),null==h?void 0:h.header),className:Tt()(`${r}-header`,{[`${r}-header-close-only`]:y&&!o&&!l},null===(t=null==f?void 0:f.classNames)||void 0===t?void 0:t.header,null==g?void 0:g.header)},a.createElement("div",{className:`${r}-header-title`},b,o&&a.createElement("div",{className:`${r}-title`},o)),l&&a.createElement("div",{className:`${r}-extra`},l)):null}),[y,b,l,d,r,o]),E=a.useMemo((()=>{var e,t;if(!i)return null;const n=`${r}-footer`;return a.createElement("div",{className:Tt()(n,null===(e=null==f?void 0:f.classNames)||void 0===e?void 0:e.footer,null==g?void 0:g.footer),style:Object.assign(Object.assign(Object.assign({},null===(t=null==f?void 0:f.styles)||void 0===t?void 0:t.footer),m),null==h?void 0:h.footer)},i)}),[i,m,r]);return a.createElement(a.Fragment,null,x,a.createElement("div",{className:Tt()(`${r}-body`,null==g?void 0:g.body,null===(t=null==f?void 0:f.classNames)||void 0===t?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},null===(n=null==f?void 0:f.styles)||void 0===n?void 0:n.body),u),null==h?void 0:h.body)},s?a.createElement(fr.A,{active:!0,title:!1,paragraph:{rows:5},className:`${r}-body-skeleton`}):p),E)};const yr=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},br=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),xr=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},br({opacity:e},{opacity:1})),Er=(e,t)=>[xr(.7,t),br({transform:yr(e)},{transform:"none"})];var wr=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:xr(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[`&-${t}`]:Er(t,n)})),{})}}};const Cr=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:a,colorBgMask:r,colorBgElevated:o,motionDurationSlow:i,motionDurationMid:l,paddingXS:s,padding:c,paddingLG:d,fontSizeLG:u,lineHeightLG:m,lineWidth:p,lineType:g,colorSplit:h,marginXS:f,colorIcon:v,colorIconHover:y,colorBgTextHover:b,colorBgTextActive:x,colorText:E,fontWeightStrong:w,footerPaddingBlock:C,footerPaddingInline:N,calc:A}=e,k=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:a,pointerEvents:"none",color:E,"&-pure":{position:"relative",background:o,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:a,background:r,pointerEvents:"auto"},[k]:{position:"absolute",zIndex:a,maxWidth:"100vw",transition:`all ${i}`,"&-hidden":{display:"none"}},[`&-left > ${k}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${k}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${k}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${k}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:o,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${(0,un.zA)(c)} ${(0,un.zA)(d)}`,fontSize:u,lineHeight:m,borderBottom:`${(0,un.zA)(p)} ${g} ${h}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:A(u).add(s).equal(),height:A(u).add(s).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:f,color:v,fontWeight:w,fontSize:u,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${l}`,textRendering:"auto","&:hover":{color:y,backgroundColor:b,textDecoration:"none"},"&:active":{backgroundColor:x}},(0,pn.K8)(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:u,lineHeight:m},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:d,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${(0,un.zA)(C)} ${(0,un.zA)(N)}`,borderTop:`${(0,un.zA)(p)} ${g} ${h}`},"&-rtl":{direction:"rtl"}}}};var Nr=(0,gn.OF)("Drawer",(e=>{const t=(0,hn.oX)(e,{});return[Cr(t),wr(t)]}),(e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}))),Ar=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const kr={distance:180},Sr=e=>{const{rootClassName:t,width:n,height:r,size:o="default",mask:i=!0,push:l=kr,open:s,afterOpenChange:c,onClose:d,prefixCls:u,getContainer:m,style:p,className:g,visible:h,afterVisibleChange:f,maskStyle:v,drawerStyle:y,contentWrapperStyle:b}=e,x=Ar(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:E,getPrefixCls:w,direction:C,drawer:N}=a.useContext(jt.QO),A=w("drawer",u),[k,S,O]=Nr(A),M=void 0===m&&E?()=>E(document.body):m,$=Tt()({"no-mask":!i,[`${A}-rtl`]:"rtl"===C},t,S,O);const I=a.useMemo((()=>null!=n?n:"large"===o?736:378),[n,o]),D=a.useMemo((()=>null!=r?r:"large"===o?736:378),[r,o]),R={motionName:(0,sa.b)(A,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},T=(0,gr.f)(),[_,j]=(0,mr.YK)("Drawer",x.zIndex),{classNames:z={},styles:L={}}=x,{classNames:P={},styles:H={}}=N||{};return k(a.createElement(ur.A,{form:!0,space:!0},a.createElement(pr.A.Provider,{value:j},a.createElement(dr,Object.assign({prefixCls:A,onClose:d,maskMotion:R,motion:e=>({motionName:(0,sa.b)(A,`panel-motion-${e}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500})},x,{classNames:{mask:Tt()(z.mask,P.mask),content:Tt()(z.content,P.content),wrapper:Tt()(z.wrapper,P.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},L.mask),v),H.mask),content:Object.assign(Object.assign(Object.assign({},L.content),y),H.content),wrapper:Object.assign(Object.assign(Object.assign({},L.wrapper),b),H.wrapper)},open:null!=s?s:h,mask:i,push:l,width:I,height:D,style:Object.assign(Object.assign({},null==N?void 0:N.style),p),className:Tt()(null==N?void 0:N.className,g),rootClassName:$,getContainer:M,afterOpenChange:null!=c?c:f,panelRef:T,zIndex:_}),a.createElement(vr,Object.assign({prefixCls:A},x,{onClose:d}))))))};Sr._InternalPanelDoNotUseOrYouWillBeFired=e=>{const{prefixCls:t,style:n,className:r,placement:o="right"}=e,i=Ar(e,["prefixCls","style","className","placement"]),{getPrefixCls:l}=a.useContext(jt.QO),s=l("drawer",t),[c,d,u]=Nr(s),m=Tt()(s,`${s}-pure`,`${s}-${o}`,d,u,r);return c(a.createElement("div",{className:m,style:n},a.createElement(vr,Object.assign({prefixCls:s},i))))};var Or=Sr;const Mr=["selector_prompt","model_client"],$r=["azure_deployment","api_version","azure_endpoint","azure_ad_token_provider"],{TextArea:Ir}=Xn.A,Dr=e=>{let{value:t,onChange:n,disabled:r}=e;return a.createElement(Ya.A,{direction:"vertical",size:"large",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Model Type"),a.createElement(Ja.A,{value:t.model_type,onChange:e=>{if("AzureOpenAIChatCompletionClient"===e)n(Object.assign({},t,{model_type:e,azure_deployment:"",api_version:"",azure_endpoint:"",azure_ad_token_provider:""}));else{const a=t,r=(0,Oa.A)(a,$r);n(Object.assign({},r,{model_type:e}))}},disabled:r,style:{width:"100%"},options:[{value:"OpenAIChatCompletionClient",label:"OpenAI"},{value:"AzureOpenAIChatCompletionClient",label:"Azure OpenAI"}]})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Model"),a.createElement(Xn.A,{value:t.model,onChange:e=>n(Object.assign({},t,{model:e.target.value})),disabled:r})),"OpenAIChatCompletionClient"===t.model_type&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"API Key"),a.createElement(Xn.A.Password,{value:t.api_key,onChange:e=>n(Object.assign({},t,{api_key:e.target.value})),disabled:r})),"AzureOpenAIChatCompletionClient"===t.model_type&&a.createElement(Ya.A,{direction:"vertical",size:"middle",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Azure Deployment"),a.createElement(Xn.A,{value:t.azure_deployment,onChange:e=>n(Object.assign({},t,{azure_deployment:e.target.value})),disabled:r})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"API Version"),a.createElement(Xn.A,{value:t.api_version,onChange:e=>n(Object.assign({},t,{api_version:e.target.value})),disabled:r})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Azure Endpoint"),a.createElement(Xn.A,{value:t.azure_endpoint,onChange:e=>n(Object.assign({},t,{azure_endpoint:e.target.value})),disabled:r}))))},Rr=e=>{let{value:t,onChange:n,disabled:r}=e;return a.createElement(Ya.A,{direction:"vertical",size:"large",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Termination Type"),a.createElement(Ja.A,{value:t.termination_type,onChange:e=>{"MaxMessageTermination"===e?n({component_type:"termination",termination_type:e,max_messages:100}):"TextMentionTermination"===e?n({component_type:"termination",termination_type:e,text:""}):"CombinationTermination"===e&&n({component_type:"termination",termination_type:e,operator:"or",conditions:[]})},disabled:r,style:{width:"100%"},options:[{value:"MaxMessageTermination",label:"Max Messages"},{value:"TextMentionTermination",label:"Text Mention"},{value:"CombinationTermination",label:"Combination"}]})),"MaxMessageTermination"===t.termination_type&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Max Messages"),a.createElement(Xn.A,{type:"number",value:t.max_messages,onChange:e=>n(Object.assign({},t,{max_messages:parseInt(e.target.value)})),disabled:r})),"TextMentionTermination"===t.termination_type&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Text to Match"),a.createElement(Xn.A,{value:t.text,onChange:e=>n(Object.assign({},t,{text:e.target.value})),disabled:r})),"CombinationTermination"===t.termination_type&&a.createElement(Ya.A,{direction:"vertical",size:"middle",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Operator"),a.createElement(Ja.A,{value:t.operator,onChange:e=>{"CombinationTermination"===t.termination_type&&n(Object.assign({},t,{operator:e}))},disabled:r,style:{width:"100%"},options:[{value:"and",label:"AND"},{value:"or",label:"OR"}]})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Conditions"),a.createElement(Ya.A,{direction:"vertical",size:"middle",style:{width:"100%"}},t.conditions.map(((e,i)=>a.createElement("div",{key:i,className:"border p-4 rounded-md"},a.createElement(Ya.A,{direction:"vertical",size:"middle",style:{width:"100%"}},a.createElement(Rr,{value:e,onChange:e=>((e,a)=>{if("CombinationTermination"===t.termination_type){const r=(0,o.A)(t.conditions);r[e]=a,n(Object.assign({},t,{conditions:r}))}})(i,e),disabled:r}),a.createElement(m.Ay,{danger:!0,onClick:()=>(e=>{"CombinationTermination"===t.termination_type&&n(Object.assign({},t,{conditions:t.conditions.filter(((t,n)=>n!==e))}))})(i),disabled:r},"Remove Condition"))))),a.createElement(m.Ay,{type:"dashed",onClick:()=>{"CombinationTermination"===t.termination_type&&n(Object.assign({},t,{conditions:[].concat((0,o.A)(t.conditions),[{component_type:"termination",termination_type:"MaxMessageTermination",max_messages:100}])}))},disabled:r,style:{width:"100%"}},"Add Condition")))))},Tr={team:e=>{let{value:t,onChange:n,disabled:r}=e;return a.createElement(Ya.A,{direction:"vertical",size:"large",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Team Type"),a.createElement(Ja.A,{value:t.team_type,onChange:e=>{if("SelectorGroupChat"===e)n(Object.assign({},t,{team_type:e,selector_prompt:"",model_client:{component_type:"model",model:"",model_type:"OpenAIChatCompletionClient"}}));else{const a=t,r=(0,Oa.A)(a,Mr);n(Object.assign({},r,{team_type:e}))}},disabled:r,style:{width:"100%"},options:[{value:"RoundRobinGroupChat",label:"Round Robin"},{value:"SelectorGroupChat",label:"Selector"}]})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Name"),a.createElement(Xn.A,{value:t.name,onChange:e=>n(Object.assign({},t,{name:e.target.value})),disabled:r})),"SelectorGroupChat"===t.team_type&&a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Selector Prompt"),a.createElement(Ir,{value:t.selector_prompt,onChange:e=>n(Object.assign({},t,{selector_prompt:e.target.value})),disabled:r,rows:4})),a.createElement(Dr,{value:t.model_client,onChange:e=>n(Object.assign({},t,{model_client:e})),disabled:r})))},model:Dr,agent:e=>{let{value:t,onChange:n,disabled:r}=e;return a.createElement(Ya.A,{direction:"vertical",size:"large",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Agent Type"),a.createElement(Ja.A,{value:t.agent_type,onChange:e=>n(Object.assign({},t,{agent_type:e})),disabled:r,style:{width:"100%"},options:[{value:"AssistantAgent",label:"Assistant Agent"},{value:"CodingAssistantAgent",label:"Coding Assistant"},{value:"UserProxyAgent",label:"User Proxy"},{value:"MultimodalWebSurfer",label:"Web Surfer"},{value:"FileSurfer",label:"File Surfer"},{value:"MagenticOneCoderAgent",label:"Magnetic One Coder"}]})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Name"),a.createElement(Xn.A,{value:t.name,onChange:e=>n(Object.assign({},t,{name:e.target.value})),disabled:r})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"System Message"),a.createElement(Ir,{value:t.system_message,onChange:e=>n(Object.assign({},t,{system_message:e.target.value})),disabled:r,rows:4})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Description"),a.createElement(Ir,{value:t.description,onChange:e=>n(Object.assign({},t,{description:e.target.value})),disabled:r,rows:2})))},tool:e=>{let{value:t,onChange:n,disabled:r}=e;return a.createElement(Ya.A,{direction:"vertical",size:"large",style:{width:"100%"}},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Tool Type"),a.createElement(Ja.A,{value:t.tool_type,onChange:e=>n(Object.assign({},t,{tool_type:e})),disabled:r,style:{width:"100%"},options:[{value:"PythonFunction",label:"Python Function"}]})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Name"),a.createElement(Xn.A,{value:t.name,onChange:e=>n(Object.assign({},t,{name:e.target.value})),disabled:r})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Description"),a.createElement(Ir,{value:t.description,onChange:e=>n(Object.assign({},t,{description:e.target.value})),disabled:r,rows:2})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium mb-2"},"Content"),a.createElement(Ir,{value:t.content,onChange:e=>n(Object.assign({},t,{content:e.target.value})),disabled:r,rows:8})))},termination:Rr},_r=e=>{let{node:t,onUpdate:n}=e;const{0:r,1:o}=(0,a.useState)(!1),{0:l,1:s}=(0,a.useState)(null),{0:c,1:d}=(0,a.useState)(!1),u=Un((e=>e.setSelectedNode)),[p,g]=i.Ay.useMessage();(0,a.useEffect)((()=>{t?(o(!0),s(t.data.config)):o(!1)}),[t]);const h=()=>{u(null)};if(!t||!l)return null;const f=Tr[t.data.type];return f?a.createElement(Or,{title:"Edit "+t.data.label,placement:"right",width:500,open:r,onClose:h,extra:a.createElement(Ya.A,null,a.createElement(m.Ay,{onClick:h},"Cancel"),a.createElement(m.Ay,{type:"primary",onClick:async()=>{try{if(d(!0),!l)throw new Error("No configuration to save");!function(e){switch(e.component_type){case"team":{const t=e;if("selector_prompt"in t){if(!t.selector_prompt)throw new Error("Selector prompt is required");if(!t.model_client)throw new Error("Model configuration is required for selector team")}break}case"model":if("AzureOpenAIChatCompletionClient"in e){const t=e;if(!t.azure_deployment||!t.api_version||!t.azure_endpoint)throw new Error("Azure OpenAI configuration is incomplete")}}}(l),n({config:l}),p.success("Changes saved successfully"),u(null)}catch(e){console.error("Save failed:",e),p.error(e instanceof Error?e.message:"Save failed")}finally{d(!1)}},loading:c},"Update"))},g,a.createElement(f,{value:l,onChange:s,disabled:c})):null};const{Sider:jr,Content:zr}=Yt,Lr=e=>{let{team:t,onChange:n,onDirtyStateChange:r}=e;const[o,l,s]=(0,It.ck)([]),[c,d,p]=(0,It.fM)([]),{0:g,1:h}=(0,a.useState)(!1),{0:f,1:v}=(0,a.useState)(!1),{0:y,1:b}=(0,a.useState)(!0),{0:x,1:E}=(0,a.useState)(!0),w=(0,a.useRef)(null),[C,N]=i.Ay.useMessage(),{undo:A,redo:k,loadFromJson:S,syncToJson:O,addNode:M,layoutNodes:$,resetHistory:I,history:D,updateNode:R,selectedNodeId:T}=Un(),_=Un((e=>e.currentHistoryIndex)),j=_>0,z=_>0,L=_<D.length-1,P=(0,a.useCallback)((e=>d((t=>(0,Dt.rN)(e,t)))),[d]),H=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}((B=We,F={activationConstraint:{distance:8}},(0,a.useMemo)((()=>({sensor:B,options:null!=F?F:{}})),[B,F])));var B,F;a.useEffect((()=>{null==r||r(j)}),[j,r]),a.useEffect((()=>{if(j){const e=e=>{e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}}),[j]),a.useEffect((()=>{if(null!=t&&t.config){const{nodes:e,edges:n}=S(t.config);l(e),d(n)}}),[t,l,d]);const U=(0,a.useCallback)((e=>{try{const t=JSON.parse(e);S(t)}catch(t){console.error("Invalid JSON:",t)}}),[S]),X=(0,a.useCallback)((async()=>{try{const e=O();if(!e)throw new Error("Unable to generate valid configuration");if(n){console.log("Saving team configuration",e);const a=t?Object.assign({},t,{config:e,created_at:void 0,updated_at:void 0}):{config:e};await n(a),I()}}catch(e){C.error(e instanceof Error?e.message:"Failed to save team configuration")}}),[O,n,I]),K=(0,a.useCallback)((()=>{v((e=>!e))}),[]);a.useEffect((()=>{if(!f)return;const e=e=>{"Escape"===e.key&&v(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[f]),a.useEffect((()=>Un.subscribe((e=>{l(e.nodes),d(e.edges)}))),[l,d]);const W=(e,t)=>{var n;return(null===(n={model:["team","agent"],tool:["agent"],agent:["team"],team:[],termination:["team"]}[e])||void 0===n?void 0:n.includes(t))||!1};return a.createElement("div",null,N,a.createElement("div",{className:"flex gap-2 text-xs rounded border-dashed border p-2 mb-2 items-center"},a.createElement("div",{className:"flex-1"},a.createElement(An,{onChange:()=>{h(!g)},className:"mr-2",defaultChecked:!g,checkedChildren:a.createElement("div",{className:" text-xs"},a.createElement(Sn,{className:"w-3 h-3 inline-block mt-1 mr-1"})),unCheckedChildren:a.createElement("div",{className:" text-xs"},a.createElement(On,{className:"w-3 h-3 mt-1 inline-block mr-1"}))}),g?"JSON ":a.createElement(a.Fragment,null,"Visual builder"," ")," ","mode"," ",a.createElement("span",{className:"text-xs text-orange-500 ml-1 underline"}," ","(experimental)")),a.createElement("div",null,a.createElement(u.A,{title:"Download Team"},a.createElement(m.Ay,{type:"text",icon:a.createElement(Mn.A,{size:18}),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary",onClick:()=>{const e=JSON.stringify(O(),null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="team-config.json",a.click(),URL.revokeObjectURL(n)}})),a.createElement(u.A,{title:"Save Changes"},a.createElement(m.Ay,{type:"text",icon:a.createElement("div",{className:"relative"},a.createElement($n.A,{size:18}),j&&a.createElement("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})),className:"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed",onClick:X})))),a.createElement(kt,{sensors:H,onDragEnd:e=>{var t,n;const{active:a,over:r}=e;if(!r||null===(t=a.data)||void 0===t||null===(n=t.current)||void 0===n||!n.current)return;const i=a.data.current.current,l=r.id,[s,c]=l.split("-zone")[0].split("-"),d=o.find((e=>e.id===s));if(!d)return;if(!W(i.type,d.data.type))return;const u={x:e.delta.x,y:e.delta.y};M(i.type,u,i.config,s)},onDragOver:e=>{const{active:t,over:n}=e;if(null==n||!n.id||!t.data.current)return;const a=t.data.current.type,r=o.find((e=>e.id===n.id));if(!r)return;const i=W(a,r.data.type);r.className=i?"drop-target-valid":"drop-target-invalid"}},a.createElement(Yt,{className:" relative bg-primary  h-[calc(100vh-239px)] rounded"},!g&&a.createElement(Sa,null),a.createElement(Yt,{className:"bg-primary rounded"},a.createElement(zr,{className:"relative rounded bg-tertiary  "},a.createElement("div",{className:"w-full h-full transition-all duration-200 "+(f?"fixed inset-4 z-50 shadow bg-tertiary  backdrop-blur-sm":"")},g?a.createElement(Va.T,{value:JSON.stringify(O(),null,2),onChange:U,editorRef:w,language:"json",minimap:!1}):a.createElement(It.Gc,{nodes:o,edges:c,onNodesChange:s,onEdgesChange:p,onConnect:P,nodeTypes:za,edgeTypes:Ha,onDrop:e=>e.preventDefault(),onDragOver:e=>e.preventDefault(),className:"rounded",fitView:!0,fitViewOptions:{padding:10}},y&&a.createElement(It.VS,null),x&&a.createElement(It.of,null))),f&&a.createElement("div",{className:"fixed inset-0 -z-10 bg-background bg-opacity-80 backdrop-blur-sm",onClick:K}),a.createElement(qa,{isJsonMode:g,isFullscreen:f,showGrid:y,onToggleMiniMap:()=>E(!x),canUndo:z,canRedo:L,isDirty:j,onToggleView:()=>h(!g),onUndo:A,onRedo:k,onSave:X,onToggleGrid:()=>b(!y),onToggleFullscreen:K,onAutoLayout:$}))),a.createElement(_r,{node:o.find((e=>e.id===T))||null,onUpdate:e=>{T&&(console.log("updating node",T,e),R(T,e),X())}}))))};var Pr=()=>{const{0:e,1:t}=(0,a.useState)(!1),{0:n,1:r}=(0,a.useState)([]),{0:u,1:m}=(0,a.useState)(null),{0:p,1:g}=(0,a.useState)((()=>{if("undefined"!=typeof window){const e=localStorage.getItem("teamSidebar");return null===e||JSON.parse(e)}})),{user:h}=(0,a.useContext)(c.v),[f,v]=i.Ay.useMessage(),{0:y,1:b}=(0,a.useState)(!1);(0,a.useEffect)((()=>{"undefined"!=typeof window&&localStorage.setItem("teamSidebar",JSON.stringify(p))}),[p]);const x=(0,a.useCallback)((async()=>{if(null!=h&&h.email)try{t(!0);const e=await d.C.listTeams(h.email);r(e),!u&&e.length>0&&m(e[0])}catch(e){console.error("Error fetching teams:",e)}finally{t(!1)}}),[null==h?void 0:h.email]);(0,a.useEffect)((()=>{x()}),[x]),(0,a.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("teamId");e&&!u&&E({id:parseInt(e)})}),[]),(0,a.useEffect)((()=>{const e=()=>{!new URLSearchParams(window.location.search).get("teamId")&&u&&m(null)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[u]);const E=async e=>{null!=h&&h.email&&e.id&&(y?l.A.confirm({title:"Unsaved Changes",content:"You have unsaved changes. Do you want to discard them?",okText:"Discard",cancelText:"Go Back",onOk:()=>{w(e.id)}}):await w(e.id))},w=async e=>{if(e&&null!=h&&h.email){t(!0);try{const t=await d.C.getTeam(e,h.email);m(t),window.history.pushState({},"","?teamId="+e)}catch(n){console.error("Error loading team:",n),f.error("Failed to load team")}finally{t(!1)}}},C=async e=>{if(null!=h&&h.email)try{const t=Object.assign({},e,{created_at:void 0,updated_at:void 0});console.log("teamData",t);const a=await d.C.createTeam(t,h.email);f.success("Team "+(e.id?"updated":"created")+" successfully"),e.id?(r(n.map((e=>e.id===a.id?a:e))),(null==u?void 0:u.id)===a.id&&m(a)):(r([a].concat((0,o.A)(n))),m(a))}catch(t){throw t}};return a.createElement("div",{className:"relative flex h-full w-full"},v,a.createElement("div",{className:"absolute left-0 top-0 h-full transition-all duration-200 ease-in-out "+(p?"w-64":"w-12")},a.createElement(A,{isOpen:p,teams:n,currentTeam:u,onToggle:()=>g(!p),onSelectTeam:E,onCreateTeam:e=>{m(e),C(e)},onEditTeam:m,onDeleteTeam:async e=>{if(null!=h&&h.email)try{await d.C.deleteTeam(e,h.email),r(n.filter((t=>t.id!==e))),(null==u?void 0:u.id)===e&&m(null),f.success("Team deleted")}catch(t){console.error("Error deleting team:",t),f.error("Error deleting team")}},isLoading:e})),a.createElement("div",{className:"flex-1 transition-all -mr-6 duration-200 "+(p?"ml-64":"ml-12")},a.createElement("div",{className:"p-4 pt-2"},a.createElement("div",{className:"flex items-center gap-2 mb-4 text-sm"},a.createElement("span",{className:"text-primary font-medium"}," Teams"),u&&a.createElement(a.Fragment,null,a.createElement(s.A,{className:"w-4 h-4 text-secondary"}),a.createElement("span",{className:"text-secondary"},u.config.name,u.id?"":a.createElement("span",{className:"text-xs text-orange-500"}," (New)")))),u?a.createElement(Lr,{team:u,onChange:C,onDirtyStateChange:b}):a.createElement("div",{className:"flex items-center   justify-center h-[calc(100vh-190px)] text-secondary"},"Select a team from the sidebar or create a new one"))))};var Hr=e=>{let{data:t}=e;return a.createElement(r.A,{meta:t.site.siteMetadata,title:"Home",link:"/build"},a.createElement("main",{style:{height:"100%"},className:" h-full "},a.createElement(Pr,null)))}},5404:function(e,t,n){n.d(t,{A:function(){return a}});const a=(0,n(1788).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8309:function(e,t,n){n.d(t,{A:function(){return a}});const a=(0,n(1788).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}}]);
//# sourceMappingURL=component---src-pages-build-tsx-06ea9ad6a71393ad00d4.js.map